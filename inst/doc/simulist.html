<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Getting Started with {simulist}</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Getting Started with {simulist}</h1>



<p>This is an introductory vignette to the {simulist} R package.
{simulist} simulates two types of common epidemiological data collected
during infectious disease outbreaks: 1) a line list, which provides
individual-level descriptions of cases in an outbreak; 2) a contact
dataset, which provides details of which others individuals were in
contact with each of the cases.</p>
<p>The main function in the {simulist} package is
<code>sim_linelist()</code>. This functions takes in arguments that
control the dynamics of the outbreak, such as the infectious period, and
outputs a line list table (<code>&lt;data.frame&gt;</code>) with case
information for each infected individual.</p>
<p>For this introduction we will simulate a line list for the early
stages of a COVID-19 (SARS-CoV-2) outbreak. This will require two R
packages: {simulist}, to produce the line list, and {epiparameter} to
provide epidemiological parameters, such as onset-to-death delays.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(simulist)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(epiparameter)</span></code></pre></div>
<p>First we load in some data that is required for the line list
simulation. Data on epidemiological parameters and distributions are
read from the {epiparameter} R package.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># create contact distribution (not available from {epiparameter} database)</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>contact_distribution <span class="ot">&lt;-</span> <span class="fu">epiparameter</span>(</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  <span class="at">disease =</span> <span class="st">&quot;COVID-19&quot;</span>,</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  <span class="at">epi_name =</span> <span class="st">&quot;contact distribution&quot;</span>,</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>  <span class="at">prob_distribution =</span> <span class="fu">create_prob_distribution</span>(</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    <span class="at">prob_distribution =</span> <span class="st">&quot;pois&quot;</span>,</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>    <span class="at">prob_distribution_params =</span> <span class="fu">c</span>(<span class="at">mean =</span> <span class="dv">2</span>)</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>  )</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a>)</span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a><span class="co">#&gt; Citation cannot be created as author, year, journal or title is missing</span></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a><span class="co"># create infectious period (not available from {epiparameter} database)</span></span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>infectious_period <span class="ot">&lt;-</span> <span class="fu">epiparameter</span>(</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>  <span class="at">disease =</span> <span class="st">&quot;COVID-19&quot;</span>,</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>  <span class="at">epi_name =</span> <span class="st">&quot;infectious period&quot;</span>,</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a>  <span class="at">prob_distribution =</span> <span class="fu">create_prob_distribution</span>(</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>    <span class="at">prob_distribution =</span> <span class="st">&quot;gamma&quot;</span>,</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>    <span class="at">prob_distribution_params =</span> <span class="fu">c</span>(<span class="at">shape =</span> <span class="dv">1</span>, <span class="at">scale =</span> <span class="dv">1</span>)</span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a>  )</span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a>)</span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="co">#&gt; Citation cannot be created as author, year, journal or title is missing</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a><span class="co"># get onset to hospital admission from {epiparameter} database</span></span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a>onset_to_hosp <span class="ot">&lt;-</span> <span class="fu">epiparameter_db</span>(</span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a>  <span class="at">disease =</span> <span class="st">&quot;COVID-19&quot;</span>,</span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a>  <span class="at">epi_name =</span> <span class="st">&quot;onset to hospitalisation&quot;</span>,</span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a>  <span class="at">single_epiparameter =</span> <span class="cn">TRUE</span></span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a>)</span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a><span class="co">#&gt; Using Linton N, Kobayashi T, Yang Y, Hayashi K, Akhmetzhanov A, Jung S, Yuan</span></span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a><span class="co">#&gt; B, Kinoshita R, Nishiura H (2020). &quot;Incubation Period and Other</span></span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a><span class="co">#&gt; Epidemiological Characteristics of 2019 Novel Coronavirus Infections</span></span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a><span class="co">#&gt; with Right Truncation: A Statistical Analysis of Publicly Available</span></span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a><span class="co">#&gt; Case Data.&quot; _Journal of Clinical Medicine_. doi:10.3390/jcm9020538</span></span>
<span id="cb2-34"><a href="#cb2-34" tabindex="-1"></a><span class="co">#&gt; &lt;https://doi.org/10.3390/jcm9020538&gt;.. </span></span>
<span id="cb2-35"><a href="#cb2-35" tabindex="-1"></a><span class="co">#&gt; To retrieve the citation use the &#39;get_citation&#39; function</span></span>
<span id="cb2-36"><a href="#cb2-36" tabindex="-1"></a></span>
<span id="cb2-37"><a href="#cb2-37" tabindex="-1"></a><span class="co"># get onset to death from {epiparameter} database</span></span>
<span id="cb2-38"><a href="#cb2-38" tabindex="-1"></a>onset_to_death <span class="ot">&lt;-</span> <span class="fu">epiparameter_db</span>(</span>
<span id="cb2-39"><a href="#cb2-39" tabindex="-1"></a>  <span class="at">disease =</span> <span class="st">&quot;COVID-19&quot;</span>,</span>
<span id="cb2-40"><a href="#cb2-40" tabindex="-1"></a>  <span class="at">epi_name =</span> <span class="st">&quot;onset to death&quot;</span>,</span>
<span id="cb2-41"><a href="#cb2-41" tabindex="-1"></a>  <span class="at">single_epiparameter =</span> <span class="cn">TRUE</span></span>
<span id="cb2-42"><a href="#cb2-42" tabindex="-1"></a>)</span>
<span id="cb2-43"><a href="#cb2-43" tabindex="-1"></a><span class="co">#&gt; Using Linton N, Kobayashi T, Yang Y, Hayashi K, Akhmetzhanov A, Jung S, Yuan</span></span>
<span id="cb2-44"><a href="#cb2-44" tabindex="-1"></a><span class="co">#&gt; B, Kinoshita R, Nishiura H (2020). &quot;Incubation Period and Other</span></span>
<span id="cb2-45"><a href="#cb2-45" tabindex="-1"></a><span class="co">#&gt; Epidemiological Characteristics of 2019 Novel Coronavirus Infections</span></span>
<span id="cb2-46"><a href="#cb2-46" tabindex="-1"></a><span class="co">#&gt; with Right Truncation: A Statistical Analysis of Publicly Available</span></span>
<span id="cb2-47"><a href="#cb2-47" tabindex="-1"></a><span class="co">#&gt; Case Data.&quot; _Journal of Clinical Medicine_. doi:10.3390/jcm9020538</span></span>
<span id="cb2-48"><a href="#cb2-48" tabindex="-1"></a><span class="co">#&gt; &lt;https://doi.org/10.3390/jcm9020538&gt;.. </span></span>
<span id="cb2-49"><a href="#cb2-49" tabindex="-1"></a><span class="co">#&gt; To retrieve the citation use the &#39;get_citation&#39; function</span></span></code></pre></div>
<p>The seed is set to ensure the output of the vignette is consistent.
When using {simulist}, setting the seed is not required unless you need
to simulate the same line list multiple times.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span></code></pre></div>
<p>The first argument in <code>sim_linelist()</code> is the contact
distribution (<code>contact_distribution</code>), which here we specify
as Poisson distribution with a mean (average) number of contacts of 2,
and with the infectious period and probability of infection per contact
(<code>prob_infection</code>) will control the growth rate of the
simulated epidemic. Here we set the probability of infection as 0.5 (on
average half of contacts become infected). The minimum requirements to
simulate a line list are the contact distribution, the infectious
period, probability of infection, onset-to-hospitalisation delay and
onset-to-death delay.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">sim_linelist</span>(</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="at">contact_distribution =</span> contact_distribution,</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="at">infectious_period =</span> infectious_period,</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="at">prob_infection =</span> <span class="fl">0.5</span>,</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>  <span class="at">onset_to_hosp =</span> onset_to_hosp,</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>  <span class="at">onset_to_death =</span> onset_to_death</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>)</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="fu">head</span>(linelist)</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co">#&gt;   id       case_name case_type sex age date_onset date_admission   outcome</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="co">#&gt; 1  1     Rafael Diaz confirmed   m  39 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">#&gt; 2  3 Fabian Griffith confirmed   m  90 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="co">#&gt; 3  4    Annabelle Vu  probable   f   9 2023-01-01     2023-01-07 recovered</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co">#&gt; 4  5        Emily Fu confirmed   f  71 2023-01-01     2023-01-01      died</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="co">#&gt; 5  6   Kirsten Barna suspected   f  48 2023-01-02           &lt;NA&gt; recovered</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="co">#&gt; 6  7  Rajab el-Badie suspected   m  77 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="co">#&gt;   date_outcome date_first_contact date_last_contact ct_value</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="co">#&gt; 1         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;     25.4</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a><span class="co">#&gt; 2         &lt;NA&gt;         2022-12-31        2023-01-03     21.9</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a><span class="co">#&gt; 3         &lt;NA&gt;         2022-12-29        2023-01-02       NA</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a><span class="co">#&gt; 4   2023-02-24         2023-01-02        2023-01-07     22.7</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a><span class="co">#&gt; 5         &lt;NA&gt;         2022-12-30        2023-01-03       NA</span></span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a><span class="co">#&gt; 6         &lt;NA&gt;         2022-12-26        2023-01-02       NA</span></span></code></pre></div>
<div id="controlling-outbreak-size" class="section level2">
<h2>Controlling outbreak size</h2>
<p>The reproduction number (<span class="math inline">\(R\)</span>) has
a strong influence on the size of an outbreak. For {simulist}, the
reproduction number is, not provided directly, but rather is determined
by the mean number of contacts and the probability of infection.
However, the {simulist} package generates line list data using a
stochastic algorithm, so even when <span class="math inline">\(R &lt;
1\)</span> it can produce a substantial outbreak by chance, or an <span class="math inline">\(R &gt;&gt; 1\)</span> will sometimes not produce a
vast epidemic in one simulation (i.e. one replicate) due to the
stochasticity.</p>
<div class="alert alert-warning">
<p><em>Alert</em></p>
<p>The reproduction number (<span class="math inline">\(R\)</span>) of
the simulation results from the contact distribution
(<code>contact_distribution</code>) and the probability of infection
(<code>prob_infection</code>); the number of infections is a binomial
sample of the number of contacts for each case with the probability of
infection (i.e. being sampled) given by <code>prob_infect</code>. If the
average number of secondary infections from each primary case is greater
than 1 (<span class="math inline">\(R &gt; 1\)</span>) then this can
lead to the outbreak becoming extremely large.</p>
<p>There is currently no depletion of susceptible individuals in the
simulation model (i.e. infinite population size), so the maximum
outbreak size (second element of the vector supplied to the
<code>outbreak_size</code> argument) can be used to return a line list
early without producing an excessively large data set.</p>
<p>If <span class="math inline">\(R &gt; 1\)</span>, the simulation may
return early after reaching the maximum outbreak size. In these
scenarios when <span class="math inline">\(R &gt; 1\)</span>, the <span class="math inline">\(R\)</span> value is controlling the rate at which
the maximum outbreak size is reached rather than the size of the
outbreak (not all simulations with <span class="math inline">\(R &gt;
1\)</span> will reach the maximum outbreak size due to
stochasticity).</p>
<p>The simulation is therefore sensitive to the contact distribution and
probability of infection resulting in an <span class="math inline">\(R\)</span> just above or below 1.</p>
</div>
<p>When requiring a minimum or maximum outbreak size we can specify the
<code>outbreak_size</code> argument in <code>sim_linelist()</code>. By
default this is set to 10 and 10,000 for the minimum and maximum,
respectively. In the case of the minimum outbreak size, this means that
the simulation will not return a line list until the conditioning has
been met. In other words, the simulation will resimulate a branching
process model until an outbreak infects at least 10 people. In the case
of the maximum outbreak size, if the number of infected individuals
exceeds the maximum the simulation will end, even if there are still
infectious individuals capable of continuing transmission, the function
will return the data early with a warning that the number of infections
in the data has reached the maximum and stating how many cases and
contacts are in the data output.</p>
<p>When requiring a line list that represents a large outbreak, such as
the COVID-19 outbreak, setting the <code>outbreak_size</code> to a
larger number guarantees a line list of at least that size. Here we
simulate a line list requiring at least 250 cases (and fewer than 10,000
cases). The maximum number of cases can also be increased when
simulating outbreaks such as global pandemics.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">sim_linelist</span>(</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="at">contact_distribution =</span> contact_distribution,</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>  <span class="at">infectious_period =</span> infectious_period,</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>  <span class="at">prob_infection =</span> <span class="fl">0.5</span>,</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>  <span class="at">onset_to_hosp =</span> onset_to_hosp,</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>  <span class="at">onset_to_death =</span> onset_to_death,</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>  <span class="at">outbreak_size =</span> <span class="fu">c</span>(<span class="dv">250</span>, <span class="fl">1e4</span>)</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>)</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="fu">head</span>(linelist)</span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="co">#&gt;   id        case_name case_type sex age date_onset date_admission   outcome</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co">#&gt; 1  1 Justin Affricano confirmed   m  87 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="co">#&gt; 2  2  Megan Mccormick  probable   f  61 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">#&gt; 3  3    Samuel Griego confirmed   m  29 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="co">#&gt; 4  4  Trevon Mitchell  probable   m  71 2023-01-01     2023-02-04      died</span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="co">#&gt; 5  5     Cheyenne Tom confirmed   f  23 2023-01-01     2023-02-07 recovered</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="co">#&gt; 6  6     Daejha Buggs confirmed   f   7 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="co">#&gt;   date_outcome date_first_contact date_last_contact ct_value</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="co">#&gt; 1         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;     22.7</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="co">#&gt; 2         &lt;NA&gt;         2023-01-03        2023-01-03       NA</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="co">#&gt; 3         &lt;NA&gt;         2022-12-31        2023-01-07     24.4</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a><span class="co">#&gt; 4   2023-01-14         2022-12-25        2023-01-02       NA</span></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a><span class="co">#&gt; 5         &lt;NA&gt;         2023-01-04        2023-01-05     24.2</span></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a><span class="co">#&gt; 6         &lt;NA&gt;         2023-01-01        2023-01-04     27.0</span></span></code></pre></div>
<p>The amount of time the simulation takes can be determined by the mean
of the contact distribution (<code>contact_distribution</code>), the
probability of infection (<code>prob_infection</code>) and conditioning
the outbreak size (<code>outbreak_size</code>). If the minimum
<code>outbreak_size</code> is large, for example hundreds or thousands
of cases, and the mean number of contacts and probability of infection
mean the reproduction number is below one, it will take many branching
process simulations until finding one that produces a sufficiently large
epidemic.</p>
</div>
<div id="case-type" class="section level2">
<h2>Case type</h2>
<p>During an infectious disease outbreak it may not be possible to
confirm every infection as a case. A confirmed case is typically defined
via a diagnostic test. There are several reasons why a case may not be
confirmed, including limited testing capacity and mild or non-specific
early symptoms, especially in fast growing epidemics. We therefore
include two other categories for cases: probable and suspected. For
example, probable cases may be those that show clinical evidence for the
disease but have not, or cannot, be confirmed by a diagnostic test.
Suspected cases are those that are possibly infected but do not show
clear clinical or epidemiological evidence, nor has a diagnostic test
been performed. Hence the distribution of suspected/probable/confirmed
will depend on the pathogen characteristics, outbreak-specific
definitions, and resources available.</p>
<p>The line list output from the {simulist} simulation contains a column
(<code>case_type</code>) with the type of case.</p>
<p>{simulist} can simulate varying probabilities of each case being
suspected, probable or confirmed. By default the
<code>sim_linelist()</code> function uses probabilities of
<code>suspected = 0.2</code>, <code>probable = 0.3</code> and
<code>confirmed = 0.5</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">sim_linelist</span>(</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  <span class="at">contact_distribution =</span> contact_distribution,</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>  <span class="at">infectious_period =</span> infectious_period,</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>  <span class="at">prob_infection =</span> <span class="fl">0.5</span>,</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>  <span class="at">onset_to_hosp =</span> onset_to_hosp,</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>  <span class="at">onset_to_death =</span> onset_to_death</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a><span class="fu">head</span>(linelist)</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co">#&gt;   id           case_name case_type sex age date_onset date_admission   outcome</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co">#&gt; 1  1       Muslim el-Rad  probable   m  40 2023-01-01           &lt;NA&gt;      died</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="co">#&gt; 2  3         Lindsay Daw confirmed   f  41 2023-01-01     2023-01-04      died</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="co">#&gt; 3  4   Margaret Vanovski confirmed   f  15 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a><span class="co">#&gt; 4  5       Billy Vasquez confirmed   m   9 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="co">#&gt; 5  7      Michaela Olson confirmed   f  53 2023-01-02           &lt;NA&gt; recovered</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a><span class="co">#&gt; 6  9 Julio Gonzalez Mora suspected   m  58 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a><span class="co">#&gt;   date_outcome date_first_contact date_last_contact ct_value</span></span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a><span class="co">#&gt; 1   2023-01-10               &lt;NA&gt;              &lt;NA&gt;       NA</span></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="co">#&gt; 2   2023-01-17         2023-01-02        2023-01-04     21.6</span></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a><span class="co">#&gt; 3         &lt;NA&gt;         2022-12-31        2023-01-06     24.6</span></span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a><span class="co">#&gt; 4         &lt;NA&gt;         2022-12-31        2023-01-05     24.0</span></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="co">#&gt; 5         &lt;NA&gt;         2022-12-29        2023-01-02     26.3</span></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a><span class="co">#&gt; 6         &lt;NA&gt;         2023-01-01        2023-01-03       NA</span></span></code></pre></div>
<p>To alter these probabilities, supply a named vector to the
<code>sim_linelist()</code> argument <code>case_type_probs</code>. The
vector should contain three numbers, with the names
<code>suspected</code>, <code>probable</code> and
<code>confirmed</code>, with the numbers summing to one. Here we change
the values to simulate an outbreak in which the proportion of cases
confirmed by laboratory testing is high.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">sim_linelist</span>(</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="at">contact_distribution =</span> contact_distribution,</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="at">infectious_period =</span> infectious_period,</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>  <span class="at">prob_infection =</span> <span class="fl">0.5</span>,</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>  <span class="at">onset_to_hosp =</span> onset_to_hosp,</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>  <span class="at">onset_to_death =</span> onset_to_death,</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>  <span class="at">case_type_probs =</span> <span class="fu">c</span>(<span class="at">suspected =</span> <span class="fl">0.05</span>, <span class="at">probable =</span> <span class="fl">0.05</span>, <span class="at">confirmed =</span> <span class="fl">0.9</span>)</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>)</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="fu">head</span>(linelist)</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="co">#&gt;   id          case_name case_type sex age date_onset date_admission   outcome</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="co">#&gt; 1  1    Margarita Perry confirmed   f  43 2023-01-01           &lt;NA&gt;      died</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="co">#&gt; 2  2         Tyler Lowe  probable   m   8 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="co">#&gt; 3  6     Hannah Wilmore confirmed   f  90 2023-01-01     2023-01-05 recovered</span></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a><span class="co">#&gt; 4  7     Vanessa Harris confirmed   f  45 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a><span class="co">#&gt; 5  8       Malik Fuller confirmed   m  85 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a><span class="co">#&gt; 6  9 Charmaine Mitchell confirmed   f  18 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a><span class="co">#&gt;   date_outcome date_first_contact date_last_contact ct_value</span></span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a><span class="co">#&gt; 1   2023-01-07               &lt;NA&gt;              &lt;NA&gt;     24.8</span></span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a><span class="co">#&gt; 2         &lt;NA&gt;         2022-12-31        2023-01-03       NA</span></span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a><span class="co">#&gt; 3         &lt;NA&gt;         2023-01-01        2023-01-04     22.8</span></span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a><span class="co">#&gt; 4         &lt;NA&gt;         2022-12-31        2023-01-04     23.6</span></span>
<span id="cb7-22"><a href="#cb7-22" tabindex="-1"></a><span class="co">#&gt; 5         &lt;NA&gt;         2022-12-31        2023-01-02     26.4</span></span>
<span id="cb7-23"><a href="#cb7-23" tabindex="-1"></a><span class="co">#&gt; 6         &lt;NA&gt;         2023-01-05        2023-01-05     26.3</span></span></code></pre></div>
<p>It is also possible to set one of these categories to <code>1</code>,
in which case every case will be of that type.</p>
<p>The way {simulist} assigns case types is by pasting case types onto
existing case data. Thus, it could be viewed that the true underlying
data is that all cases in the simulation are confirmed, but that there
is a lack of information in some cases. There are no cases in the output
line list that are incorrectly attributed as probable or suspected that
have not been infected. That is to say, all individuals in the line
list, whatever their case type, are infected during the outbreak.</p>
</div>
<div id="anonymous-line-list" class="section level2">
<h2>Anonymous line list</h2>
<p>By default <code>sim_linelist()</code> provides the name of each
individual in the line list. If an anonymised line list is required the
<code>anonymise</code> argument of <code>sim_linelist()</code> can be
set to <code>TRUE</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">sim_linelist</span>(</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  <span class="at">contact_distribution =</span> contact_distribution,</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  <span class="at">infectious_period =</span> infectious_period,</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>  <span class="at">prob_infection =</span> <span class="fl">0.5</span>,</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  <span class="at">onset_to_hosp =</span> onset_to_hosp,</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  <span class="at">onset_to_death =</span> onset_to_death,</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>  <span class="at">anonymise =</span> <span class="cn">TRUE</span></span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>)</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="fu">head</span>(linelist)</span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="co">#&gt;   id  case_name case_type sex age date_onset date_admission   outcome</span></span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a><span class="co">#&gt; 1  1 cClWJSQgqZ confirmed   m  46 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a><span class="co">#&gt; 2  3 zmepWU7Zuu confirmed   f  25 2023-01-02     2023-01-13 recovered</span></span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a><span class="co">#&gt; 3  4 BqNMpEC7MY confirmed   m  28 2023-01-02           &lt;NA&gt; recovered</span></span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a><span class="co">#&gt; 4  6 I5bc1CGQvs confirmed   m   6 2023-01-03           &lt;NA&gt; recovered</span></span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a><span class="co">#&gt; 5  8 EZ3IlginCk confirmed   m  26 2023-01-02           &lt;NA&gt; recovered</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a><span class="co">#&gt; 6 12 S2bqfFpMmt  probable   f  72 2023-01-05           &lt;NA&gt; recovered</span></span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a><span class="co">#&gt;   date_outcome date_first_contact date_last_contact ct_value</span></span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a><span class="co">#&gt; 1         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;     23.8</span></span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a><span class="co">#&gt; 2         &lt;NA&gt;         2023-01-01        2023-01-02     25.8</span></span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a><span class="co">#&gt; 3         &lt;NA&gt;         2023-01-01        2023-01-04     20.8</span></span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a><span class="co">#&gt; 4         &lt;NA&gt;         2023-01-01        2023-01-05     26.6</span></span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a><span class="co">#&gt; 5         &lt;NA&gt;         2023-01-02        2023-01-03     26.4</span></span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a><span class="co">#&gt; 6         &lt;NA&gt;         2023-01-04        2023-01-07       NA</span></span></code></pre></div>
<p>The names used in the line list are produced at random by the <a href="https://CRAN.R-project.org/package=randomNames">{randomNames}</a>
R package. Therefore, even when <code>anonymise = FALSE</code> there is
no personal data of real individuals being produced or shared. The
<code>anonymise</code> argument only changes the <code>$case_name</code>
column of the line list, as this is deemed the only personally
identifiable information (PII) in the line list data.</p>
</div>
<div id="population-age" class="section level2">
<h2>Population age</h2>
<p>For an overview of how a line list can be simulated with a uniform or
structured population age distribution see the <a href="age-struct-pop.html">vignette dedicated to this topic</a>.</p>
</div>
<div id="age-stratified-hospitalisation-and-death-risks" class="section level2">
<h2>Age-stratified hospitalisation and death risks</h2>
<p>For an overview of how a line list can be simulated with
age-stratified (or age-dependent) hospitalisation and death risks see
the <a href="age-strat-risks.html">vignette dedicated to this
topic</a>.</p>
</div>
<div id="simulate-contacts-table" class="section level2">
<h2>Simulate contacts table</h2>
<p>To simulate a contacts table, the <code>sim_contacts()</code>
function can be used. This requires the same arguments as
<code>sim_linelist()</code>, but does not require the
onset-to-hospitalisation delay and onset-to-death delays.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>contacts <span class="ot">&lt;-</span> <span class="fu">sim_contacts</span>(</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>  <span class="at">contact_distribution =</span> contact_distribution,</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>  <span class="at">infectious_period =</span> infectious_period,</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>  <span class="at">prob_infection =</span> <span class="fl">0.5</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>)</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="fu">head</span>(contacts)</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="co">#&gt;               from               to age sex date_first_contact</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="co">#&gt; 1  Mariah Williams       Aric Verde  49   m         2023-01-01</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="co">#&gt; 2       Aric Verde Muammar el-Rayes  22   m         2023-01-06</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="co">#&gt; 3       Aric Verde  Alexis Martinez  88   f         2023-01-04</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="co">#&gt; 4 Muammar el-Rayes   Deangelo Moody  32   m         2023-01-02</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="co">#&gt; 5 Muammar el-Rayes  Jamison Bennett  38   m         2023-01-05</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="co">#&gt; 6 Muammar el-Rayes Brittanny Owston  63   f         2023-01-04</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="co">#&gt;   date_last_contact was_case           status</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="co">#&gt; 1        2023-01-04        Y             case</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a><span class="co">#&gt; 2        2023-01-07        Y             case</span></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a><span class="co">#&gt; 3        2023-01-04        Y             case</span></span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a><span class="co">#&gt; 4        2023-01-05        N   under_followup</span></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a><span class="co">#&gt; 5        2023-01-07        N lost_to_followup</span></span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a><span class="co">#&gt; 6        2023-01-05        Y             case</span></span></code></pre></div>
</div>
<div id="simulate-both-line-list-and-contacts-table" class="section level2">
<h2>Simulate both line list and contacts table</h2>
<p>To produce both a line list and a contacts table for the same
outbreak, the <code>sim_linelist()</code> and
<code>sim_contacts()</code> cannot be used separately due to the
stochastic algorithm, meaning the data in the line list will be
discordant with the contacts table.</p>
<p>In order to simulate a line list and a contacts table of the same
outbreak the <code>sim_outbreak()</code> function is required. This will
simulate a single outbreak and return a line list and a contacts table.
The inputs of <code>sim_outbreak()</code> are the same as the inputs
required for <code>sim_linelist()</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a>outbreak <span class="ot">&lt;-</span> <span class="fu">sim_outbreak</span>(</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>  <span class="at">contact_distribution =</span> contact_distribution,</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a>  <span class="at">infectious_period =</span> infectious_period,</span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>  <span class="at">prob_infection =</span> <span class="fl">0.5</span>,</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a>  <span class="at">onset_to_hosp =</span> onset_to_hosp,</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>  <span class="at">onset_to_death =</span> onset_to_death</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>)</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a><span class="fu">head</span>(outbreak<span class="sc">$</span>linelist)</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a><span class="co">#&gt;   id            case_name case_type sex age date_onset date_admission   outcome</span></span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a><span class="co">#&gt; 1  1        Alyssa Morgan suspected   f  51 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="co">#&gt; 2  2           Ryan Cline  probable   f  15 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a><span class="co">#&gt; 3  4 Brittany Fleddermann confirmed   f  47 2023-01-02           &lt;NA&gt; recovered</span></span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a><span class="co">#&gt; 4  6       Urian Arechiga suspected   m  60 2023-01-01     2023-02-24 recovered</span></span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a><span class="co">#&gt; 5  7        Marwa el-Riaz  probable   f  43 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a><span class="co">#&gt; 6  8           Marie Cira suspected   f  34 2023-01-02           &lt;NA&gt; recovered</span></span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a><span class="co">#&gt;   date_outcome date_first_contact date_last_contact ct_value</span></span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a><span class="co">#&gt; 1         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;       NA</span></span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a><span class="co">#&gt; 2         &lt;NA&gt;         2022-12-30        2023-01-02       NA</span></span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a><span class="co">#&gt; 3         &lt;NA&gt;         2023-01-01        2023-01-04     24.2</span></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a><span class="co">#&gt; 4         &lt;NA&gt;         2022-12-28        2023-01-01       NA</span></span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a><span class="co">#&gt; 5         &lt;NA&gt;         2023-01-05        2023-01-07       NA</span></span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a><span class="co">#&gt; 6         &lt;NA&gt;         2023-01-04        2023-01-05       NA</span></span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a><span class="fu">head</span>(outbreak<span class="sc">$</span>contacts)</span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a><span class="co">#&gt;            from                   to age sex date_first_contact</span></span>
<span id="cb10-25"><a href="#cb10-25" tabindex="-1"></a><span class="co">#&gt; 1 Alyssa Morgan           Ryan Cline  15   f         2022-12-30</span></span>
<span id="cb10-26"><a href="#cb10-26" tabindex="-1"></a><span class="co">#&gt; 2    Ryan Cline      Naadir al-Yamin  60   m         2022-12-28</span></span>
<span id="cb10-27"><a href="#cb10-27" tabindex="-1"></a><span class="co">#&gt; 3    Ryan Cline Brittany Fleddermann  47   f         2023-01-01</span></span>
<span id="cb10-28"><a href="#cb10-28" tabindex="-1"></a><span class="co">#&gt; 4    Ryan Cline        Brendan Dizon  47   m         2023-01-03</span></span>
<span id="cb10-29"><a href="#cb10-29" tabindex="-1"></a><span class="co">#&gt; 5    Ryan Cline       Urian Arechiga  60   m         2022-12-28</span></span>
<span id="cb10-30"><a href="#cb10-30" tabindex="-1"></a><span class="co">#&gt; 6    Ryan Cline        Marwa el-Riaz  43   f         2023-01-05</span></span>
<span id="cb10-31"><a href="#cb10-31" tabindex="-1"></a><span class="co">#&gt;   date_last_contact was_case         status</span></span>
<span id="cb10-32"><a href="#cb10-32" tabindex="-1"></a><span class="co">#&gt; 1        2023-01-02        Y           case</span></span>
<span id="cb10-33"><a href="#cb10-33" tabindex="-1"></a><span class="co">#&gt; 2        2023-01-02        N under_followup</span></span>
<span id="cb10-34"><a href="#cb10-34" tabindex="-1"></a><span class="co">#&gt; 3        2023-01-04        Y           case</span></span>
<span id="cb10-35"><a href="#cb10-35" tabindex="-1"></a><span class="co">#&gt; 4        2023-01-04        N under_followup</span></span>
<span id="cb10-36"><a href="#cb10-36" tabindex="-1"></a><span class="co">#&gt; 5        2023-01-01        Y           case</span></span>
<span id="cb10-37"><a href="#cb10-37" tabindex="-1"></a><span class="co">#&gt; 6        2023-01-07        Y           case</span></span></code></pre></div>
<p><code>sim_outbreak()</code> has the same features as
<code>sim_linelist()</code> and <code>sim_contacts()</code>, this
includes simulating with age-stratified risks of hospitalisation and
death, the probability of case types or contact tracing status can be
modified.</p>
<div class="alert alert-info">
<p><em>Advanced</em></p>
<p>The <code>sim_*()</code> functions, by default, use an excess degree
distribution to account for a network effect when sampling the number of
contacts in the simulation model (<span class="math inline">\(q(n) \sim
(n + 1)p(n + 1)\)</span> where <span class="math inline">\(p(n)\)</span>
is the probability density function of a distribution, e.g., Poisson or
Negative binomial, within the <code>.sim_network_bp()</code> internal
function). This network effect can be turned off by using the
<code>config</code> argument in any <code>sim_*()</code> function and
setting <code>network = &quot;unadjusted&quot;</code>
(<code>create_config(network = &quot;unadjusted&quot;)</code>) which will instead
sample from a probability distribution <span class="math inline">\(p(n)\)</span>.</p>
</div>
</div>
<div id="using-functions-for-distributions-instead-of-epiparameter" class="section level2">
<h2>Using functions for distributions instead of
<code>&lt;epiparameter&gt;</code></h2>
<p>The <code>contact_distribution</code>,
<code>infectious_period</code>, <code>onset_to_hosp</code>,
<code>onset_to_death</code> and <code>onset_to_recovery</code> arguments
can accept either an <code>&lt;epiparameter&gt;</code> object (as shown
above), or can accept a function. It is possible to use a predefined
function or an <a href="https://en.wikipedia.org/wiki/Anonymous_function">anonymous
function</a>. Here we’ll demonstrate how to use both.</p>
<div id="predefined-functions" class="section level3">
<h3>Predefined functions</h3>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>contact_distribution <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">dpois</span>(<span class="at">x =</span> x, <span class="at">lambda =</span> <span class="dv">2</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>infectious_period <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">rgamma</span>(<span class="at">n =</span> x, <span class="at">shape =</span> <span class="dv">2</span>, <span class="at">scale =</span> <span class="dv">2</span>)</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>onset_to_hosp <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">rlnorm</span>(<span class="at">n =</span> x, <span class="at">meanlog =</span> <span class="fl">1.5</span>, <span class="at">sdlog =</span> <span class="fl">0.5</span>)</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a>onset_to_death <span class="ot">&lt;-</span> <span class="cf">function</span>(x) <span class="fu">rweibull</span>(<span class="at">n =</span> x, <span class="at">shape =</span> <span class="fl">0.5</span>, <span class="at">scale =</span> <span class="fl">0.2</span>)</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" tabindex="-1"></a>outbreak <span class="ot">&lt;-</span> <span class="fu">sim_outbreak</span>(</span>
<span id="cb11-7"><a href="#cb11-7" tabindex="-1"></a>  <span class="at">contact_distribution =</span> contact_distribution,</span>
<span id="cb11-8"><a href="#cb11-8" tabindex="-1"></a>  <span class="at">infectious_period =</span> infectious_period,</span>
<span id="cb11-9"><a href="#cb11-9" tabindex="-1"></a>  <span class="at">prob_infection =</span> <span class="fl">0.5</span>,</span>
<span id="cb11-10"><a href="#cb11-10" tabindex="-1"></a>  <span class="at">onset_to_hosp =</span> onset_to_hosp,</span>
<span id="cb11-11"><a href="#cb11-11" tabindex="-1"></a>  <span class="at">onset_to_death =</span> onset_to_death</span>
<span id="cb11-12"><a href="#cb11-12" tabindex="-1"></a>)</span>
<span id="cb11-13"><a href="#cb11-13" tabindex="-1"></a><span class="fu">head</span>(outbreak<span class="sc">$</span>linelist)</span>
<span id="cb11-14"><a href="#cb11-14" tabindex="-1"></a><span class="co">#&gt;   id               case_name case_type sex age date_onset date_admission</span></span>
<span id="cb11-15"><a href="#cb11-15" tabindex="-1"></a><span class="co">#&gt; 1  1           Marco Barrios  probable   m  84 2023-01-01     2023-01-06</span></span>
<span id="cb11-16"><a href="#cb11-16" tabindex="-1"></a><span class="co">#&gt; 2  3        Nicholas Roberts confirmed   m  44 2023-01-01           &lt;NA&gt;</span></span>
<span id="cb11-17"><a href="#cb11-17" tabindex="-1"></a><span class="co">#&gt; 3  4           Alec Gonzalez  probable   m  19 2023-01-01           &lt;NA&gt;</span></span>
<span id="cb11-18"><a href="#cb11-18" tabindex="-1"></a><span class="co">#&gt; 4  5                Kyle Her suspected   m  47 2023-01-04     2023-01-10</span></span>
<span id="cb11-19"><a href="#cb11-19" tabindex="-1"></a><span class="co">#&gt; 5  6 Taylor Vazquez-Corrales  probable   f  13 2023-01-03           &lt;NA&gt;</span></span>
<span id="cb11-20"><a href="#cb11-20" tabindex="-1"></a><span class="co">#&gt; 6  8       Saahira el-Demian confirmed   f  66 2023-01-04           &lt;NA&gt;</span></span>
<span id="cb11-21"><a href="#cb11-21" tabindex="-1"></a><span class="co">#&gt;     outcome date_outcome date_first_contact date_last_contact ct_value</span></span>
<span id="cb11-22"><a href="#cb11-22" tabindex="-1"></a><span class="co">#&gt; 1 recovered         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;       NA</span></span>
<span id="cb11-23"><a href="#cb11-23" tabindex="-1"></a><span class="co">#&gt; 2 recovered         &lt;NA&gt;         2022-12-29        2023-01-02     23.4</span></span>
<span id="cb11-24"><a href="#cb11-24" tabindex="-1"></a><span class="co">#&gt; 3 recovered         &lt;NA&gt;         2023-01-03        2023-01-05       NA</span></span>
<span id="cb11-25"><a href="#cb11-25" tabindex="-1"></a><span class="co">#&gt; 4      died   2023-01-04         2022-12-29        2023-01-02       NA</span></span>
<span id="cb11-26"><a href="#cb11-26" tabindex="-1"></a><span class="co">#&gt; 5 recovered         &lt;NA&gt;         2023-01-01        2023-01-03       NA</span></span>
<span id="cb11-27"><a href="#cb11-27" tabindex="-1"></a><span class="co">#&gt; 6 recovered         &lt;NA&gt;         2023-01-01        2023-01-03     24.8</span></span>
<span id="cb11-28"><a href="#cb11-28" tabindex="-1"></a><span class="fu">head</span>(outbreak<span class="sc">$</span>contacts)</span>
<span id="cb11-29"><a href="#cb11-29" tabindex="-1"></a><span class="co">#&gt;               from                      to age sex date_first_contact</span></span>
<span id="cb11-30"><a href="#cb11-30" tabindex="-1"></a><span class="co">#&gt; 1    Marco Barrios          Huda al-Younan  67   f         2023-01-03</span></span>
<span id="cb11-31"><a href="#cb11-31" tabindex="-1"></a><span class="co">#&gt; 2    Marco Barrios        Nicholas Roberts  44   m         2022-12-29</span></span>
<span id="cb11-32"><a href="#cb11-32" tabindex="-1"></a><span class="co">#&gt; 3    Marco Barrios           Alec Gonzalez  19   m         2023-01-03</span></span>
<span id="cb11-33"><a href="#cb11-33" tabindex="-1"></a><span class="co">#&gt; 4 Nicholas Roberts                Kyle Her  47   m         2022-12-29</span></span>
<span id="cb11-34"><a href="#cb11-34" tabindex="-1"></a><span class="co">#&gt; 5 Nicholas Roberts Taylor Vazquez-Corrales  13   f         2023-01-01</span></span>
<span id="cb11-35"><a href="#cb11-35" tabindex="-1"></a><span class="co">#&gt; 6    Alec Gonzalez        Zahraaa el-Salam  45   f         2023-01-03</span></span>
<span id="cb11-36"><a href="#cb11-36" tabindex="-1"></a><span class="co">#&gt;   date_last_contact was_case           status</span></span>
<span id="cb11-37"><a href="#cb11-37" tabindex="-1"></a><span class="co">#&gt; 1        2023-01-05        N lost_to_followup</span></span>
<span id="cb11-38"><a href="#cb11-38" tabindex="-1"></a><span class="co">#&gt; 2        2023-01-02        Y             case</span></span>
<span id="cb11-39"><a href="#cb11-39" tabindex="-1"></a><span class="co">#&gt; 3        2023-01-05        Y             case</span></span>
<span id="cb11-40"><a href="#cb11-40" tabindex="-1"></a><span class="co">#&gt; 4        2023-01-02        Y             case</span></span>
<span id="cb11-41"><a href="#cb11-41" tabindex="-1"></a><span class="co">#&gt; 5        2023-01-03        Y             case</span></span>
<span id="cb11-42"><a href="#cb11-42" tabindex="-1"></a><span class="co">#&gt; 6        2023-01-06        N   under_followup</span></span></code></pre></div>
</div>
<div id="anonymous-functions" class="section level3">
<h3>Anonymous functions</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>outbreak <span class="ot">&lt;-</span> <span class="fu">sim_outbreak</span>(</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  <span class="at">contact_distribution =</span> <span class="cf">function</span>(x) <span class="fu">dpois</span>(<span class="at">x =</span> x, <span class="at">lambda =</span> <span class="dv">2</span>),</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>  <span class="at">infectious_period =</span> <span class="cf">function</span>(x) <span class="fu">rgamma</span>(<span class="at">n =</span> x, <span class="at">shape =</span> <span class="dv">2</span>, <span class="at">scale =</span> <span class="dv">2</span>),</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>  <span class="at">prob_infection =</span> <span class="fl">0.5</span>,</span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a>  <span class="at">onset_to_hosp =</span> <span class="cf">function</span>(x) <span class="fu">rlnorm</span>(<span class="at">n =</span> x, <span class="at">meanlog =</span> <span class="fl">1.5</span>, <span class="at">sdlog =</span> <span class="fl">0.5</span>),</span>
<span id="cb12-6"><a href="#cb12-6" tabindex="-1"></a>  <span class="at">onset_to_death =</span> <span class="cf">function</span>(x) <span class="fu">rweibull</span>(<span class="at">n =</span> x, <span class="at">shape =</span> <span class="fl">0.5</span>, <span class="at">scale =</span> <span class="fl">0.2</span>)</span>
<span id="cb12-7"><a href="#cb12-7" tabindex="-1"></a>)</span>
<span id="cb12-8"><a href="#cb12-8" tabindex="-1"></a><span class="fu">head</span>(outbreak<span class="sc">$</span>linelist)</span>
<span id="cb12-9"><a href="#cb12-9" tabindex="-1"></a><span class="co">#&gt;   id         case_name case_type sex age date_onset date_admission   outcome</span></span>
<span id="cb12-10"><a href="#cb12-10" tabindex="-1"></a><span class="co">#&gt; 1  1       Trae Gurule suspected   m  12 2023-01-01     2023-01-11      died</span></span>
<span id="cb12-11"><a href="#cb12-11" tabindex="-1"></a><span class="co">#&gt; 2  3   Quinton Doublin confirmed   m  46 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb12-12"><a href="#cb12-12" tabindex="-1"></a><span class="co">#&gt; 3  4     Andres Jacket  probable   m  35 2023-01-06           &lt;NA&gt; recovered</span></span>
<span id="cb12-13"><a href="#cb12-13" tabindex="-1"></a><span class="co">#&gt; 4  6 Alexander Wartman confirmed   m   9 2023-01-02           &lt;NA&gt; recovered</span></span>
<span id="cb12-14"><a href="#cb12-14" tabindex="-1"></a><span class="co">#&gt; 5  7  Miranda Preciado  probable   f  21 2023-01-05     2023-01-08      died</span></span>
<span id="cb12-15"><a href="#cb12-15" tabindex="-1"></a><span class="co">#&gt; 6  8     Jordon Barnes confirmed   m  36 2023-01-05           &lt;NA&gt; recovered</span></span>
<span id="cb12-16"><a href="#cb12-16" tabindex="-1"></a><span class="co">#&gt;   date_outcome date_first_contact date_last_contact ct_value</span></span>
<span id="cb12-17"><a href="#cb12-17" tabindex="-1"></a><span class="co">#&gt; 1   2023-01-01               &lt;NA&gt;              &lt;NA&gt;       NA</span></span>
<span id="cb12-18"><a href="#cb12-18" tabindex="-1"></a><span class="co">#&gt; 2         &lt;NA&gt;         2023-01-04        2023-01-06     26.3</span></span>
<span id="cb12-19"><a href="#cb12-19" tabindex="-1"></a><span class="co">#&gt; 3         &lt;NA&gt;         2022-12-31        2023-01-02       NA</span></span>
<span id="cb12-20"><a href="#cb12-20" tabindex="-1"></a><span class="co">#&gt; 4         &lt;NA&gt;         2023-01-02        2023-01-04     23.0</span></span>
<span id="cb12-21"><a href="#cb12-21" tabindex="-1"></a><span class="co">#&gt; 5   2023-01-05         2023-01-02        2023-01-06       NA</span></span>
<span id="cb12-22"><a href="#cb12-22" tabindex="-1"></a><span class="co">#&gt; 6         &lt;NA&gt;         2023-01-01        2023-01-07     29.2</span></span>
<span id="cb12-23"><a href="#cb12-23" tabindex="-1"></a><span class="fu">head</span>(outbreak<span class="sc">$</span>contacts)</span>
<span id="cb12-24"><a href="#cb12-24" tabindex="-1"></a><span class="co">#&gt;                from                to age sex date_first_contact</span></span>
<span id="cb12-25"><a href="#cb12-25" tabindex="-1"></a><span class="co">#&gt; 1       Trae Gurule    Dillon Peebles  43   m         2023-01-04</span></span>
<span id="cb12-26"><a href="#cb12-26" tabindex="-1"></a><span class="co">#&gt; 2       Trae Gurule   Quinton Doublin  46   m         2023-01-04</span></span>
<span id="cb12-27"><a href="#cb12-27" tabindex="-1"></a><span class="co">#&gt; 3   Quinton Doublin     Andres Jacket  35   m         2022-12-31</span></span>
<span id="cb12-28"><a href="#cb12-28" tabindex="-1"></a><span class="co">#&gt; 4   Quinton Doublin         Paige Guo  73   f         2022-12-28</span></span>
<span id="cb12-29"><a href="#cb12-29" tabindex="-1"></a><span class="co">#&gt; 5   Quinton Doublin Alexander Wartman   9   m         2023-01-02</span></span>
<span id="cb12-30"><a href="#cb12-30" tabindex="-1"></a><span class="co">#&gt; 6 Alexander Wartman  Miranda Preciado  21   f         2023-01-02</span></span>
<span id="cb12-31"><a href="#cb12-31" tabindex="-1"></a><span class="co">#&gt;   date_last_contact was_case         status</span></span>
<span id="cb12-32"><a href="#cb12-32" tabindex="-1"></a><span class="co">#&gt; 1        2023-01-04        N under_followup</span></span>
<span id="cb12-33"><a href="#cb12-33" tabindex="-1"></a><span class="co">#&gt; 2        2023-01-06        Y           case</span></span>
<span id="cb12-34"><a href="#cb12-34" tabindex="-1"></a><span class="co">#&gt; 3        2023-01-02        Y           case</span></span>
<span id="cb12-35"><a href="#cb12-35" tabindex="-1"></a><span class="co">#&gt; 4        2023-01-02        N under_followup</span></span>
<span id="cb12-36"><a href="#cb12-36" tabindex="-1"></a><span class="co">#&gt; 5        2023-01-04        Y           case</span></span>
<span id="cb12-37"><a href="#cb12-37" tabindex="-1"></a><span class="co">#&gt; 6        2023-01-06        Y           case</span></span></code></pre></div>
<div class="alert alert-warning">
<p>The <code>contact_distribution</code> requires a density function
instead of a random number generation function
(i.e. <code>dpois()</code> or <code>dnbinom()</code> instead of
<code>rpois()</code> or <code>rnbinom()</code>). This is due to the
branching process simulation adjusting the sampling of contacts to take
into account the random network effect.</p>
</div>
<p>The same approach of using anonymous functions can be used in
<code>sim_linelist()</code> and <code>sim_contacts()</code>.</p>
</div>
</div>
<div id="simulating-without-hospitalisations-andor-deaths" class="section level2">
<h2>Simulating without hospitalisations and/or deaths</h2>
<p>The onset-to-hospitalisation (<code>onset_to_hosp</code>) and
onset-to-death (<code>onset_to_death</code>) arguments can also be set
to <code>NULL</code> in which case the date of admission
(<code>$date_admission</code>) and date of death
(<code>$date_death</code>) column in the line list will contains
<code>NA</code>s.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">sim_linelist</span>(</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="at">contact_distribution =</span> contact_distribution,</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  <span class="at">infectious_period =</span> infectious_period,</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>  <span class="at">prob_infection =</span> <span class="fl">0.5</span>,</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>  <span class="at">onset_to_hosp =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>  <span class="at">onset_to_death =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a>  <span class="at">hosp_risk =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a>  <span class="at">hosp_death_risk =</span> <span class="cn">NULL</span>,</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a>  <span class="at">non_hosp_death_risk =</span> <span class="cn">NULL</span></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a>)</span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="fu">head</span>(linelist)</span>
<span id="cb13-12"><a href="#cb13-12" tabindex="-1"></a><span class="co">#&gt;   id       case_name case_type sex age date_onset date_admission   outcome</span></span>
<span id="cb13-13"><a href="#cb13-13" tabindex="-1"></a><span class="co">#&gt; 1  1    Nicolas Xiao  probable   m  20 2023-01-01           &lt;NA&gt; recovered</span></span>
<span id="cb13-14"><a href="#cb13-14" tabindex="-1"></a><span class="co">#&gt; 2  2  Ashlyn Desalvo confirmed   f  90 2023-01-07           &lt;NA&gt; recovered</span></span>
<span id="cb13-15"><a href="#cb13-15" tabindex="-1"></a><span class="co">#&gt; 3  3 Caitlin Gardner confirmed   f  45 2023-01-02           &lt;NA&gt; recovered</span></span>
<span id="cb13-16"><a href="#cb13-16" tabindex="-1"></a><span class="co">#&gt; 4  4     Dwayne Cole confirmed   m  77 2023-01-08           &lt;NA&gt; recovered</span></span>
<span id="cb13-17"><a href="#cb13-17" tabindex="-1"></a><span class="co">#&gt; 5  6  Brandon Sisson confirmed   m  48 2023-01-08           &lt;NA&gt; recovered</span></span>
<span id="cb13-18"><a href="#cb13-18" tabindex="-1"></a><span class="co">#&gt; 6  7 Danielle Linnon confirmed   f   4 2023-01-02           &lt;NA&gt; recovered</span></span>
<span id="cb13-19"><a href="#cb13-19" tabindex="-1"></a><span class="co">#&gt;   date_outcome date_first_contact date_last_contact ct_value</span></span>
<span id="cb13-20"><a href="#cb13-20" tabindex="-1"></a><span class="co">#&gt; 1         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;       NA</span></span>
<span id="cb13-21"><a href="#cb13-21" tabindex="-1"></a><span class="co">#&gt; 2         &lt;NA&gt;         2023-01-02        2023-01-02     23.4</span></span>
<span id="cb13-22"><a href="#cb13-22" tabindex="-1"></a><span class="co">#&gt; 3         &lt;NA&gt;         2022-12-31        2023-01-03     30.4</span></span>
<span id="cb13-23"><a href="#cb13-23" tabindex="-1"></a><span class="co">#&gt; 4         &lt;NA&gt;         2023-01-08        2023-01-09     23.9</span></span>
<span id="cb13-24"><a href="#cb13-24" tabindex="-1"></a><span class="co">#&gt; 5         &lt;NA&gt;         2023-01-06        2023-01-08     24.2</span></span>
<span id="cb13-25"><a href="#cb13-25" tabindex="-1"></a><span class="co">#&gt; 6         &lt;NA&gt;         2022-12-31        2023-01-04     27.8</span></span></code></pre></div>
<p>This same functionality also applies to <code>sim_outbreak()</code>.
In the above example, <code>hosp_risk</code>,
<code>hosp_death_risk</code> and <code>non_hosp_death_risk</code> are
set to <code>NULL</code>. If the risk (<code>*_risk</code>) arguments
are left as numeric inputs but the corresponding onset-to-event
distribution (i.e. <code>hosp_risk</code> for <code>onset_to_hosp</code>
and <code>hosp_death_risk</code> and <code>non_hosp_death_risk</code>
for <code>onset_to_death</code>) are set to <code>NULL</code> a warning
will be produced. The example above simulates with neither
hospitalisation or deaths, but these do not need to be <em>turned
off</em> together, and one or the other can be set to <code>NULL</code>
with their corresponding risk arguments.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
