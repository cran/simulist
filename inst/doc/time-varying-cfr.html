<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Time-varying case fatality risk</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Time-varying case fatality risk</h1>



<div class="alert alert-info">
<p>If you are unfamiliar with the {simulist} package or the
<code>sim_linelist()</code> function <a href="simulist.html">Get Started
vignette</a> is a great place to start.</p>
</div>
<p>This vignette demonstrates how to simulate line list data using the
time-varying case fatality risk and gives an overview of the
methodological details.</p>
<div class="alert alert-secondary">
<p>The {simulist} R package uses an individual-based branching process
simulation to generate contacts and cases for line list and contact
tracing data. The time-varying case fatality risk feature provides a way
to incorporate aspects of epidemics where the risk of death may decrease
through time, potentially due to improved medical treatment, vaccination
or viral evolution. It is also possible to model increasing case
fatality risk through time, or a stepwise risk function where the risk
of death shifts between states.</p>
<p>The time-varying case fatality risk implemented in this package is
not meant to explicitly model these factors, but rather to give the user
an option to more closely resemble fatality risk through the course of
an epidemic, possibly because there is data on this, or just to simulate
data that has these characteristics.</p>
<p>See the <a href="https://epiverse-trace.github.io/epidemics/index.html">{epidemics}
R package</a> for a population-level epidemic simulation package with
explicit interventions and vaccinations.</p>
</div>
<p>Given that setting a time-varying case fatality risk is not needed
for most use cases of the {simulist} R package, this feature uses the
<code>config</code> argument in the <code>sim_*()</code> functions.
Therefore, the time-varying case fatality risk can be set when calling
<code>create_config()</code> (see below for details).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(simulist)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(epiparameter)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="fu">library</span>(incidence2)</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span></code></pre></div>
<p>First we will demonstrate the default setting of a constant case
fatality risk throughout an epidemic.</p>
<p>We load the required delay distributions using the {epiparameter}
package, by either manually creating them (contact distribution and
infectious period), or load them from the {epiparameter} library of
epidemiological parameters (onset-to-hospitalisation and
onset-to-death).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>contact_distribution <span class="ot">&lt;-</span> <span class="fu">epiparameter</span>(</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>  <span class="at">disease =</span> <span class="st">&quot;COVID-19&quot;</span>,</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>  <span class="at">epi_name =</span> <span class="st">&quot;contact distribution&quot;</span>,</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>  <span class="at">prob_distribution =</span> <span class="fu">create_prob_distribution</span>(</span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>    <span class="at">prob_distribution =</span> <span class="st">&quot;pois&quot;</span>,</span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>    <span class="at">prob_distribution_params =</span> <span class="fu">c</span>(<span class="at">mean =</span> <span class="dv">2</span>)</span>
<span id="cb2-7"><a href="#cb2-7" tabindex="-1"></a>  )</span>
<span id="cb2-8"><a href="#cb2-8" tabindex="-1"></a>)</span>
<span id="cb2-9"><a href="#cb2-9" tabindex="-1"></a><span class="co">#&gt; Citation cannot be created as author, year, journal or title is missing</span></span>
<span id="cb2-10"><a href="#cb2-10" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" tabindex="-1"></a>infectious_period <span class="ot">&lt;-</span> <span class="fu">epiparameter</span>(</span>
<span id="cb2-12"><a href="#cb2-12" tabindex="-1"></a>  <span class="at">disease =</span> <span class="st">&quot;COVID-19&quot;</span>,</span>
<span id="cb2-13"><a href="#cb2-13" tabindex="-1"></a>  <span class="at">epi_name =</span> <span class="st">&quot;infectious period&quot;</span>,</span>
<span id="cb2-14"><a href="#cb2-14" tabindex="-1"></a>  <span class="at">prob_distribution =</span> <span class="fu">create_prob_distribution</span>(</span>
<span id="cb2-15"><a href="#cb2-15" tabindex="-1"></a>    <span class="at">prob_distribution =</span> <span class="st">&quot;gamma&quot;</span>,</span>
<span id="cb2-16"><a href="#cb2-16" tabindex="-1"></a>    <span class="at">prob_distribution_params =</span> <span class="fu">c</span>(<span class="at">shape =</span> <span class="dv">3</span>, <span class="at">scale =</span> <span class="dv">3</span>)</span>
<span id="cb2-17"><a href="#cb2-17" tabindex="-1"></a>  )</span>
<span id="cb2-18"><a href="#cb2-18" tabindex="-1"></a>)</span>
<span id="cb2-19"><a href="#cb2-19" tabindex="-1"></a><span class="co">#&gt; Citation cannot be created as author, year, journal or title is missing</span></span>
<span id="cb2-20"><a href="#cb2-20" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" tabindex="-1"></a><span class="co"># get onset to hospital admission from {epiparameter} database</span></span>
<span id="cb2-22"><a href="#cb2-22" tabindex="-1"></a>onset_to_hosp <span class="ot">&lt;-</span> <span class="fu">epiparameter</span>(</span>
<span id="cb2-23"><a href="#cb2-23" tabindex="-1"></a>  <span class="at">disease =</span> <span class="st">&quot;COVID-19&quot;</span>,</span>
<span id="cb2-24"><a href="#cb2-24" tabindex="-1"></a>  <span class="at">epi_name =</span> <span class="st">&quot;onset to hospitalisation&quot;</span>,</span>
<span id="cb2-25"><a href="#cb2-25" tabindex="-1"></a>  <span class="at">prob_distribution =</span> <span class="fu">create_prob_distribution</span>(</span>
<span id="cb2-26"><a href="#cb2-26" tabindex="-1"></a>    <span class="at">prob_distribution =</span> <span class="st">&quot;lnorm&quot;</span>,</span>
<span id="cb2-27"><a href="#cb2-27" tabindex="-1"></a>    <span class="at">prob_distribution_params =</span> <span class="fu">c</span>(<span class="at">meanlog =</span> <span class="dv">1</span>, <span class="at">sdlog =</span> <span class="fl">0.5</span>)</span>
<span id="cb2-28"><a href="#cb2-28" tabindex="-1"></a>  )</span>
<span id="cb2-29"><a href="#cb2-29" tabindex="-1"></a>)</span>
<span id="cb2-30"><a href="#cb2-30" tabindex="-1"></a><span class="co">#&gt; Citation cannot be created as author, year, journal or title is missing</span></span>
<span id="cb2-31"><a href="#cb2-31" tabindex="-1"></a></span>
<span id="cb2-32"><a href="#cb2-32" tabindex="-1"></a><span class="co"># get onset to death from {epiparameter} database</span></span>
<span id="cb2-33"><a href="#cb2-33" tabindex="-1"></a>onset_to_death <span class="ot">&lt;-</span> <span class="fu">epiparameter_db</span>(</span>
<span id="cb2-34"><a href="#cb2-34" tabindex="-1"></a>  <span class="at">disease =</span> <span class="st">&quot;COVID-19&quot;</span>,</span>
<span id="cb2-35"><a href="#cb2-35" tabindex="-1"></a>  <span class="at">epi_name =</span> <span class="st">&quot;onset to death&quot;</span>,</span>
<span id="cb2-36"><a href="#cb2-36" tabindex="-1"></a>  <span class="at">single_epiparameter =</span> <span class="cn">TRUE</span></span>
<span id="cb2-37"><a href="#cb2-37" tabindex="-1"></a>)</span>
<span id="cb2-38"><a href="#cb2-38" tabindex="-1"></a><span class="co">#&gt; Using Linton N, Kobayashi T, Yang Y, Hayashi K, Akhmetzhanov A, Jung S, Yuan</span></span>
<span id="cb2-39"><a href="#cb2-39" tabindex="-1"></a><span class="co">#&gt; B, Kinoshita R, Nishiura H (2020). &quot;Incubation Period and Other</span></span>
<span id="cb2-40"><a href="#cb2-40" tabindex="-1"></a><span class="co">#&gt; Epidemiological Characteristics of 2019 Novel Coronavirus Infections</span></span>
<span id="cb2-41"><a href="#cb2-41" tabindex="-1"></a><span class="co">#&gt; with Right Truncation: A Statistical Analysis of Publicly Available</span></span>
<span id="cb2-42"><a href="#cb2-42" tabindex="-1"></a><span class="co">#&gt; Case Data.&quot; _Journal of Clinical Medicine_. doi:10.3390/jcm9020538</span></span>
<span id="cb2-43"><a href="#cb2-43" tabindex="-1"></a><span class="co">#&gt; &lt;https://doi.org/10.3390/jcm9020538&gt;.. </span></span>
<span id="cb2-44"><a href="#cb2-44" tabindex="-1"></a><span class="co">#&gt; To retrieve the citation use the &#39;get_citation&#39; function</span></span></code></pre></div>
<p>We set the seed to ensure we have the same output each time the
vignette is rendered. When using {simulist}, setting the seed is not
required unless you need to simulate the same line list multiple
times.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span></code></pre></div>
<div id="constant-case-fatality-risk" class="section level2">
<h2>Constant case fatality risk</h2>
<p>When calling the <code>create_config()</code> function the default
output contains a list element named
<code>time_varying_death_risk</code> set to <code>NULL</code>. This
corresponds to a constant case fatality risk over time, which is
controlled by the <code>hosp_death_risk</code> and
<code>non_hosp_death_risk</code> arguments. The defaults for these two
arguments are:</p>
<ul>
<li>death risk when hospitalised (<code>hosp_death_risk</code>):
<code>0.5</code> (50%)</li>
<li>death risk outside of hospitals (<code>non_hosp_death_risk</code>):
<code>0.05</code> (5%)</li>
</ul>
<p>In this example we set them explicitly to be clear which risks we’re
using, but otherwise the <code>hosp_death_risk</code>,
<code>non_hosp_death_risk</code> and <code>config</code> do not need to
be specified and can use their default values.</p>
<p>For all examples in this vignette we will set the epidemic size to be
between 500 and 1,000 cases, to ensure that we can clearly see the case
fatality patterns in the data.</p>
<div class="alert alert-info">
<p>See the <a href="simulist.html#Controlling-outbreak-size">Get Started
vignette section on Controlling Outbreak Size</a> for more information
on this.</p>
</div>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">sim_linelist</span>(</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="at">contact_distribution =</span> contact_distribution,</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="at">infectious_period =</span> infectious_period,</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="at">prob_infection =</span> <span class="fl">0.5</span>,</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>  <span class="at">onset_to_hosp =</span> onset_to_hosp,</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>  <span class="at">onset_to_death =</span> onset_to_death,</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>  <span class="at">hosp_death_risk =</span> <span class="fl">0.5</span>,</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>  <span class="at">non_hosp_death_risk =</span> <span class="fl">0.05</span>,</span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>  <span class="at">outbreak_size =</span> <span class="fu">c</span>(<span class="dv">500</span>, <span class="dv">1000</span>),</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>  <span class="at">config =</span> <span class="fu">create_config</span>()</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>)</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co"># first 6 rows of linelist</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="fu">head</span>(linelist)</span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="co">#&gt;   id          case_name case_type sex age date_onset date_reporting</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="co">#&gt; 1  1  Reylando Yohannes  probable   m  40 2023-01-01     2023-01-01</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="co">#&gt; 2  2         David Baca confirmed   m  12 2023-01-04     2023-01-04</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a><span class="co">#&gt; 3  4     Kristopher Zhu  probable   m  45 2023-01-05     2023-01-05</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a><span class="co">#&gt; 4  6 Muntasir al-Kaiser  probable   m  36 2023-01-07     2023-01-07</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a><span class="co">#&gt; 5  7      Emma Kirscher  probable   f  42 2023-01-09     2023-01-09</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a><span class="co">#&gt; 6  8           Jehan Ly confirmed   f  14 2023-01-08     2023-01-08</span></span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a><span class="co">#&gt;   date_admission   outcome date_outcome date_first_contact date_last_contact</span></span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a><span class="co">#&gt; 1           &lt;NA&gt; recovered         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;</span></span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a><span class="co">#&gt; 2           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-31        2023-01-04</span></span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a><span class="co">#&gt; 3           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-30        2023-01-04</span></span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a><span class="co">#&gt; 4     2023-01-09 recovered         &lt;NA&gt;         2023-01-03        2023-01-08</span></span>
<span id="cb4-27"><a href="#cb4-27" tabindex="-1"></a><span class="co">#&gt; 5           &lt;NA&gt; recovered         &lt;NA&gt;         2023-01-01        2023-01-06</span></span>
<span id="cb4-28"><a href="#cb4-28" tabindex="-1"></a><span class="co">#&gt; 6     2023-01-09 recovered         &lt;NA&gt;         2022-12-31        2023-01-08</span></span>
<span id="cb4-29"><a href="#cb4-29" tabindex="-1"></a><span class="co">#&gt;   ct_value</span></span>
<span id="cb4-30"><a href="#cb4-30" tabindex="-1"></a><span class="co">#&gt; 1       NA</span></span>
<span id="cb4-31"><a href="#cb4-31" tabindex="-1"></a><span class="co">#&gt; 2     24.9</span></span>
<span id="cb4-32"><a href="#cb4-32" tabindex="-1"></a><span class="co">#&gt; 3       NA</span></span>
<span id="cb4-33"><a href="#cb4-33" tabindex="-1"></a><span class="co">#&gt; 4       NA</span></span>
<span id="cb4-34"><a href="#cb4-34" tabindex="-1"></a><span class="co">#&gt; 5       NA</span></span>
<span id="cb4-35"><a href="#cb4-35" tabindex="-1"></a><span class="co">#&gt; 6     26.3</span></span></code></pre></div>
<p>To visualise the incidence of cases and deaths over time we will use
the <a href="https://www.reconverse.org/incidence2/">{incidence2} R
package</a>.</p>
<div class="alert alert-info">
<p>For more information on using {incidence2} to plot line list data see
the <a href="vis-linelist.html">Visualising simulated data</a>
vignette.</p>
</div>
<p>Before converting the line list <code>&lt;data.frame&gt;</code> to an
<code>&lt;incidence&gt;</code> object we need to ungroup the outcome
columns into their own columns using the <a href="https://tidyr.tidyverse.org/">{tidyr}</a> and <a href="https://dplyr.tidyverse.org/">{dplyr}</a> R packages from the <a href="https://www.tidyverse.org/">Tidyverse</a>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>    <span class="at">names_from =</span> outcome,</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>    <span class="at">values_from =</span> date_outcome</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>    <span class="at">date_death =</span> died,</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>    <span class="at">date_recovery =</span> recovered</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>daily <span class="ot">&lt;-</span> <span class="fu">incidence</span>(</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>  linelist,</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>  <span class="at">date_index =</span> <span class="fu">c</span>(</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>    <span class="at">onset =</span> <span class="st">&quot;date_onset&quot;</span>,</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>    <span class="at">death =</span> <span class="st">&quot;date_death&quot;</span></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>  ),</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>  <span class="at">interval =</span> <span class="st">&quot;daily&quot;</span>,</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>  <span class="at">complete_dates =</span> <span class="cn">TRUE</span></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>)</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="fu">plot</span>(daily)</span></code></pre></div>
<p>&lt;img
src=“/tmp/RtmpbTSW6h/Rbuild1864d1f2d4375/simulist/vignettes/time-varying-cfr_files/figure-html/plot-onset-hospitalisation-1.png”
alt=“Two histograms in a single column, showing the daily incidence of
cases from symptom onset and incidence of deaths. Case fatality risk for
hospitalised individuals is 0.5 and the risk of non-hospitalised
individuals is 0.05, and these risks are constant through time. The
y-axis is labelled”count” and the x-axis is labelled “date_index”. The
plot shows fluctuating number of cases over time with substantially
fewer deaths than cases.” /&gt;</p>
</div>
<div id="higher-risk-of-case-fatality" class="section level2">
<h2>Higher risk of case fatality</h2>
<p>We repeat the above simulation but increase the risk of case fatality
for both hospitalised (<code>hosp_death_risk</code>) and
non-hospitalised (<code>non_hosp_death_risk</code>) individuals
infected.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">sim_linelist</span>(</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="at">contact_distribution =</span> contact_distribution,</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a>  <span class="at">infectious_period =</span> infectious_period,</span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>  <span class="at">prob_infection =</span> <span class="fl">0.5</span>,</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>  <span class="at">onset_to_hosp =</span> onset_to_hosp,</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a>  <span class="at">onset_to_death =</span> onset_to_death,</span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a>  <span class="at">hosp_death_risk =</span> <span class="fl">0.9</span>,</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>  <span class="at">non_hosp_death_risk =</span> <span class="fl">0.75</span>,</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>  <span class="at">outbreak_size =</span> <span class="fu">c</span>(<span class="dv">500</span>, <span class="dv">1000</span>),</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>  <span class="at">config =</span> <span class="fu">create_config</span>()</span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>)</span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a><span class="co">#&gt; Warning: Number of cases exceeds maximum outbreak size. </span></span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a><span class="co">#&gt; Returning data early with 1026 cases and 1994 total contacts (including cases).</span></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a><span class="fu">head</span>(linelist)</span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a><span class="co">#&gt;   id             case_name case_type sex age date_onset date_reporting</span></span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a><span class="co">#&gt; 1  1 Christopher Bishop Jr confirmed   m  42 2023-01-01     2023-01-01</span></span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a><span class="co">#&gt; 2  2         Sophie Nedved confirmed   f  25 2023-01-06     2023-01-06</span></span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a><span class="co">#&gt; 3  4          Bianca Doell suspected   f  64 2023-01-07     2023-01-07</span></span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a><span class="co">#&gt; 4  6          Brandy Allen confirmed   f  46 2023-01-09     2023-01-09</span></span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a><span class="co">#&gt; 5  8    Zakiyya el-Shareef suspected   f  78 2023-01-08     2023-01-08</span></span>
<span id="cb7-22"><a href="#cb7-22" tabindex="-1"></a><span class="co">#&gt; 6 10              Xai Yang suspected   m  13 2023-01-15     2023-01-15</span></span>
<span id="cb7-23"><a href="#cb7-23" tabindex="-1"></a><span class="co">#&gt;   date_admission   outcome date_outcome date_first_contact date_last_contact</span></span>
<span id="cb7-24"><a href="#cb7-24" tabindex="-1"></a><span class="co">#&gt; 1     2023-01-05 recovered         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;</span></span>
<span id="cb7-25"><a href="#cb7-25" tabindex="-1"></a><span class="co">#&gt; 2     2023-01-09      died   2023-02-26         2022-12-31        2023-01-03</span></span>
<span id="cb7-26"><a href="#cb7-26" tabindex="-1"></a><span class="co">#&gt; 3           &lt;NA&gt;      died   2023-01-27         2023-01-01        2023-01-08</span></span>
<span id="cb7-27"><a href="#cb7-27" tabindex="-1"></a><span class="co">#&gt; 4           &lt;NA&gt;      died   2023-01-23         2023-01-04        2023-01-07</span></span>
<span id="cb7-28"><a href="#cb7-28" tabindex="-1"></a><span class="co">#&gt; 5           &lt;NA&gt; recovered         &lt;NA&gt;         2023-01-05        2023-01-11</span></span>
<span id="cb7-29"><a href="#cb7-29" tabindex="-1"></a><span class="co">#&gt; 6           &lt;NA&gt; recovered         &lt;NA&gt;         2023-01-06        2023-01-11</span></span>
<span id="cb7-30"><a href="#cb7-30" tabindex="-1"></a><span class="co">#&gt;   ct_value</span></span>
<span id="cb7-31"><a href="#cb7-31" tabindex="-1"></a><span class="co">#&gt; 1     19.6</span></span>
<span id="cb7-32"><a href="#cb7-32" tabindex="-1"></a><span class="co">#&gt; 2     28.7</span></span>
<span id="cb7-33"><a href="#cb7-33" tabindex="-1"></a><span class="co">#&gt; 3       NA</span></span>
<span id="cb7-34"><a href="#cb7-34" tabindex="-1"></a><span class="co">#&gt; 4     21.7</span></span>
<span id="cb7-35"><a href="#cb7-35" tabindex="-1"></a><span class="co">#&gt; 5       NA</span></span>
<span id="cb7-36"><a href="#cb7-36" tabindex="-1"></a><span class="co">#&gt; 6       NA</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>    <span class="at">names_from =</span> outcome,</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>    <span class="at">values_from =</span> date_outcome</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>    <span class="at">date_death =</span> died,</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>    <span class="at">date_recovery =</span> recovered</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a>daily <span class="ot">&lt;-</span> <span class="fu">incidence</span>(</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>  linelist,</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a>  <span class="at">date_index =</span> <span class="fu">c</span>(</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>    <span class="at">onset =</span> <span class="st">&quot;date_onset&quot;</span>,</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>    <span class="at">death =</span> <span class="st">&quot;date_death&quot;</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>  ),</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>  <span class="at">interval =</span> <span class="st">&quot;daily&quot;</span>,</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>  <span class="at">complete_dates =</span> <span class="cn">TRUE</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">plot</span>(daily)</span></code></pre></div>
<p>&lt;img
src=“/tmp/RtmpbTSW6h/Rbuild1864d1f2d4375/simulist/vignettes/time-varying-cfr_files/figure-html/plot-onset-death-higher-risk-1.png”
alt=“Two histograms in a single column, showing the daily incidence of
cases from symptom onset and incidence of deaths. Case fatality risk for
hospitalised individuals is 0.9 and the risk of non-hospitalised
individuals is 0.75, and these risks are constant through time. The
y-axis is labelled”count” and the x-axis is labelled “date_index”. The
plot shows growth and subsequent decline of the outbreak, with a similar
number of cases and deaths over time.” /&gt;</p>
</div>
<div id="continuous-time-varying-case-fatality-risk" class="section level2">
<h2>Continuous time-varying case fatality risk</h2>
<p>Now we’ve seen what the constant case fatality risk simulations look
like, we can simulate with a time-varying function for the risk.</p>
<p>This is setup by calling the <code>create_config()</code> function,
and providing an anonymous function with two arguments,
<code>risk</code> and <code>time</code>, to
<code>time_varying_death_risk</code>. This function will then use the
relevant risk (e.g. <code>hosp_death_risk</code>) and the time an
individual is infected and calculates the probability (or risk) of
death.</p>
<p>The <code>create_config()</code> function has no named arguments, and
the argument you are modifying needs to be matched by name exactly (case
sensitive). See <code>?create_config()</code> for documentation.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>config <span class="ot">&lt;-</span> <span class="fu">create_config</span>(</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>  <span class="at">time_varying_death_risk =</span> <span class="cf">function</span>(risk, time) risk <span class="sc">*</span> <span class="fu">exp</span>(<span class="sc">-</span><span class="fl">0.05</span> <span class="sc">*</span> time)</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a>)</span></code></pre></div>
<p>Here we set the case fatality risk to exponentially decrease through
time. This will provide a shallow (monotonic) decline of case fatality
through the simulated epidemic.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>exp_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a>  <span class="at">time =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">150</span>,</span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a>  <span class="at">value =</span> config<span class="sc">$</span><span class="fu">time_varying_death_risk</span>(<span class="at">risk =</span> <span class="fl">0.9</span>, <span class="at">time =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">150</span>)</span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">ggplot</span>(exp_df) <span class="sc">+</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Value&quot;</span>) <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Time (Days)&quot;</span>) <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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" alt="A scatter plot showing an exponential decline over time representing the time-varying hospitalised case fatality risk over time." /></p>
<p>The time-varying hospitalised case fatality risk function
(<code>config$time_varying_death_risk</code>) throughout the epidemic.
In this case the hospitalised risks (<code>hosp_death_risk</code>) are
at their maximum value at day 0 and decline through time, with risk
approaching zero at around day 100.</p>
<div class="alert alert-info">
<p><em>Advanced</em></p>
<p>The time-varying case fatality risk function modifies the the death
risk specified by <code>hosp_death_risk</code> and
<code>non_hosp_death_risk</code>. In this example, the user-supplied
<code>hosp_death_risk</code> and <code>non_hosp_death_risk</code> are
the maximum values, because the user-supplied time-varying function is
declining over time, however, a user-supplied function may also increase
over time, or fluctuate. The requirements are that the time-varying case
fatality risk for both hospitalised and non-hospitalised infections must
be between 0 and 1, otherwise the function will error.</p>
<p>In the example below <code>hosp_death_risk</code> is <code>0.9</code>
and <code>non_hosp_death_risk</code> is <code>0.75</code>, and the
time-varying case fatality risk function is an exponential decline. This
means that on day 0 of the epidemic (i.e. first infection seeds the
outbreak) the risks will be <code>0.9</code> and <code>0.75</code>. But
any time after the start of the epidemic (<span class="math inline">\(t_0 + \Delta t\)</span>) the risks will be lower,
and when the exponential function approaches zero the risk of a case
dying will also go to zero.</p>
</div>
<p>Simulating with the time-varying case fatality risk:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">sim_linelist</span>(</span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a>  <span class="at">contact_distribution =</span> contact_distribution,</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>  <span class="at">infectious_period =</span> infectious_period,</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>  <span class="at">prob_infection =</span> <span class="fl">0.5</span>,</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>  <span class="at">onset_to_hosp =</span> onset_to_hosp,</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>  <span class="at">onset_to_death =</span> onset_to_death,</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>  <span class="at">hosp_death_risk =</span> <span class="fl">0.9</span>,</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>  <span class="at">non_hosp_death_risk =</span> <span class="fl">0.75</span>,</span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>  <span class="at">outbreak_size =</span> <span class="fu">c</span>(<span class="dv">500</span>, <span class="dv">1000</span>),</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>  <span class="at">config =</span> config</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>)</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a><span class="fu">head</span>(linelist)</span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="co">#&gt;   id              case_name case_type sex age date_onset date_reporting</span></span>
<span id="cb14-15"><a href="#cb14-15" tabindex="-1"></a><span class="co">#&gt; 1  1 Eduardo Avalos Chavira confirmed   m  59 2023-01-01     2023-01-01</span></span>
<span id="cb14-16"><a href="#cb14-16" tabindex="-1"></a><span class="co">#&gt; 2  2    Danielle Lopez-Shue confirmed   f   2 2023-01-06     2023-01-06</span></span>
<span id="cb14-17"><a href="#cb14-17" tabindex="-1"></a><span class="co">#&gt; 3  3          Rebecca Begay suspected   f  14 2023-01-02     2023-01-02</span></span>
<span id="cb14-18"><a href="#cb14-18" tabindex="-1"></a><span class="co">#&gt; 4  6          Miguel Cortez  probable   m  49 2023-01-07     2023-01-07</span></span>
<span id="cb14-19"><a href="#cb14-19" tabindex="-1"></a><span class="co">#&gt; 5  8            Cam Tu Reed  probable   f  22 2023-01-08     2023-01-08</span></span>
<span id="cb14-20"><a href="#cb14-20" tabindex="-1"></a><span class="co">#&gt; 6 11            Kyla Tafoya suspected   f  40 2023-01-04     2023-01-04</span></span>
<span id="cb14-21"><a href="#cb14-21" tabindex="-1"></a><span class="co">#&gt;   date_admission outcome date_outcome date_first_contact date_last_contact</span></span>
<span id="cb14-22"><a href="#cb14-22" tabindex="-1"></a><span class="co">#&gt; 1           &lt;NA&gt;    died   2023-01-19               &lt;NA&gt;              &lt;NA&gt;</span></span>
<span id="cb14-23"><a href="#cb14-23" tabindex="-1"></a><span class="co">#&gt; 2     2023-01-09    died   2023-02-01         2022-12-30        2023-01-07</span></span>
<span id="cb14-24"><a href="#cb14-24" tabindex="-1"></a><span class="co">#&gt; 3           &lt;NA&gt;    died   2023-01-31         2022-12-31        2023-01-04</span></span>
<span id="cb14-25"><a href="#cb14-25" tabindex="-1"></a><span class="co">#&gt; 4           &lt;NA&gt;    died   2023-01-26         2023-01-05        2023-01-08</span></span>
<span id="cb14-26"><a href="#cb14-26" tabindex="-1"></a><span class="co">#&gt; 5     2023-01-11    died   2023-01-22         2023-01-03        2023-01-08</span></span>
<span id="cb14-27"><a href="#cb14-27" tabindex="-1"></a><span class="co">#&gt; 6           &lt;NA&gt;    died   2023-01-13         2022-12-27        2023-01-06</span></span>
<span id="cb14-28"><a href="#cb14-28" tabindex="-1"></a><span class="co">#&gt;   ct_value</span></span>
<span id="cb14-29"><a href="#cb14-29" tabindex="-1"></a><span class="co">#&gt; 1     26.2</span></span>
<span id="cb14-30"><a href="#cb14-30" tabindex="-1"></a><span class="co">#&gt; 2     25.7</span></span>
<span id="cb14-31"><a href="#cb14-31" tabindex="-1"></a><span class="co">#&gt; 3       NA</span></span>
<span id="cb14-32"><a href="#cb14-32" tabindex="-1"></a><span class="co">#&gt; 4       NA</span></span>
<span id="cb14-33"><a href="#cb14-33" tabindex="-1"></a><span class="co">#&gt; 5       NA</span></span>
<span id="cb14-34"><a href="#cb14-34" tabindex="-1"></a><span class="co">#&gt; 6       NA</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>    <span class="at">names_from =</span> outcome,</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>    <span class="at">values_from =</span> date_outcome</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb15-6"><a href="#cb15-6" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb15-7"><a href="#cb15-7" tabindex="-1"></a>    <span class="at">date_death =</span> died,</span>
<span id="cb15-8"><a href="#cb15-8" tabindex="-1"></a>    <span class="at">date_recovery =</span> recovered</span>
<span id="cb15-9"><a href="#cb15-9" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a>daily <span class="ot">&lt;-</span> <span class="fu">incidence</span>(</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>  linelist,</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>  <span class="at">date_index =</span> <span class="fu">c</span>(</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>    <span class="at">onset =</span> <span class="st">&quot;date_onset&quot;</span>,</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>    <span class="at">death =</span> <span class="st">&quot;date_death&quot;</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>  ),</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>  <span class="at">interval =</span> <span class="st">&quot;daily&quot;</span>,</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>  <span class="at">complete_dates =</span> <span class="cn">TRUE</span></span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">plot</span>(daily)</span></code></pre></div>
<p>&lt;img
src=“/tmp/RtmpbTSW6h/Rbuild1864d1f2d4375/simulist/vignettes/time-varying-cfr_files/figure-html/plot-onset-death-time-varying-cfr-1.png”
alt=“Two histograms in a single column, showing the daily incidence of
cases from symptom onset and incidence of deaths. The baseline case
fatality risk for hospitalised individuals is 0.9 and the risk of
non-hospitalised individuals is 0.75, and these decline exponentially
through time. The y-axis is labelled”count” and the x-axis is labelled
“date_index”. The plot shows fluctuating cases over time, and only a few
deaths early in the epidemic and no deaths later in the outbreak.”
/&gt;</p>
</div>
<div id="stepwise-time-varying-case-fatality-risk" class="section level2">
<h2>Stepwise time-varying case fatality risk</h2>
<p>In addition to a continuously varying case fatality risk function,
the simulation can also work with stepwise (or piecewise) functions.
This is where the risk will instantaneously change at a given point in
time to another risk level.</p>
<p>To achieve this, we again specify an anonymous function in
<code>create_config()</code>, but have the risk of a case dying set as
the baseline <code>hosp_death_risk</code> and
<code>non_hosp_death_risk</code> for the first 60 days of the outbreak
and then become zero (i.e. if an individual is infected after day 60
they will definitely recover).</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a>config <span class="ot">&lt;-</span> <span class="fu">create_config</span>(</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>  <span class="at">time_varying_death_risk =</span> <span class="cf">function</span>(risk, time) <span class="fu">ifelse</span>(<span class="at">test =</span> time <span class="sc">&lt;</span> <span class="dv">60</span>, <span class="at">yes =</span> risk, <span class="at">no =</span> <span class="dv">0</span>)</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a>stepwise_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>  <span class="at">time =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">150</span>,</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a>  <span class="at">value =</span> config<span class="sc">$</span><span class="fu">time_varying_death_risk</span>(<span class="at">risk =</span> <span class="fl">0.9</span>, <span class="at">time =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">150</span>)</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="fu">ggplot</span>(stepwise_df) <span class="sc">+</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Value&quot;</span>) <span class="sc">+</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Time (Days)&quot;</span>) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAwAAAAHgCAMAAAAlhPoXAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADAFBMVEX////r6+v39/fs7Ozy8vL4+Pj29vYAAAD+/v7w8PCgoKDz8/Px8fHv7+/7+/vJycn09PR3d3f8/PzNzc3u7u5xcXH7+vr///z19fWTk5P//u3///YhISE3NzcKCAn9///t7e2Li4sPDwx0dHSPkJBTU1Pz//9BQUFvb287Ozt9fX4ZGBl6enpeXV77//9iYmKGhof4//+7u7tOTU39/f0zMzMWFhXAwL++vr5YWFg0NDQpKChFRUUwMDBJSUm7gVxyY5eOyPlmZmbe/f8LUqfQ+v/Dw8NubGskJSYUFBSCgoLp6elqaWktLCvV/P8bHBzhqXJkcqj95KwFAgddi8ZHR0empqZPUFLGxsesVxHQm20+Pj7Q0NDt/v/m/v/81Zvh4eEeHh7F+f7ttXf836f//Nr825zMzMxXVlb++87zvXySYXG14fv4z5RobKESEhJ4yfpshKV7XYrU8/64uLjc2trm5ub/89Hjrnf7ynhkmdOo3fthlM5VECBsZ5ldhb3JdyxNLBRuaH9qvvmha2kRRJP//uR+pc68ayJmfZmdnZ35583N7P388uOE1f3/+cC1r7Kz0OqHbF//86knCDCaShtjrur/8b3V1dWnfWqytcERJ0esrKzw2cH+7bZto9vC9P/wxZFabojbx7mEXoqsm4rI0N/HkmqbmZYNGFZ8tObT6PgRM4O+il5qIBjC7v5NSksHDzM7eL4eZrbWhjXc4e2s5f6mdVw/kuJgfLXS0tLezLHxq1jkuIMmBwtAGgrkmUjI2e2b2PyafGWnxeP+6beyrZZuXnY7DCVNn+iU4v7S4/P2169gWlgjVJj94pRgNSj569vq9f2SttyFgG5WYXqyeUGy7P2DiJp7YFr7//nI5v1Pd5He+P+Y0vbz/O54LBJ0kLzUvbKhsc6Iv++HORSdwdB/maYKKHL/++qx9PyphI7Qrok1E1aQZj3c1MQgDEEkQ2hFL3Ezg9SzhG0cNVCbkXRdQ0AgH2x+SFqqpZL09rxBR4EvV20aHSXr9+znXPbtAAAVFUlEQVR42uzce2xW5R0H8PPS0rctvaCtK7SW1iC0EHylhablIsMLl4gyKXJZL6IiFxGMIiheJuMSUZwDTVhkU5lMI3PzMg1Rg8imuJlpjAJO3dQ5TdhMFi/Jtn+WLTttuTi3FtB54s75fJOG5zzP6ft7n/B++jzPISUIREREREREREREROS/pfG4bjNw4HGRJcpSphWjaeV/UQD5Jd0O5WRF57AgulLZebGcVmmfyErlZkc3rVSvHoePPwEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAugVw4bILg4LGBSOPL27sEyyvvzpINbUFvWdP7BXcWT8luLp+edC3sbgot6SpsPPWwqaS3KLixr6dt06pvzPoNXF276CtKdV5a5/G4uNHLmgs6Ly1uqktN3yhnK4X2nhnkBPemtvWVP1l12xadqBm/WdrNn2mJgCJBzA0nU6PuCidPu3cdPqiceHFoPBryOR0+sTWsLEw/Bobjo5pSKe/MSu8mBVeNIwJb51xYLT1xHR68pAD3zcuHD33tHB0xIGOyo4Xqjlwa01465jK8IUGfVVqjs0BIOEAGtOJzlAAEg5geLIB1ACQcADbkg1gFAAJBzAl3COnB3z6M9Hzxf/s1q9GzUYAkn4IXn5Kw6jioZVj75pZU3l28cKGU9tqRz9a37+19eSmEaMntZ0xetDs4UNq8jfOqBxWckrDKSXDKmdszK8ZMnz2oNFntE0aPaLp5NbW/vWPVp7QdmrDwuKzK8fOvGts5dAFo8JbB1aOW7atZshJE2eNPqftnNNmTTxpSM22ZeMqB5Z8yTVbKw/UHH2kmp4CeQwawwfm/h0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIGYP3EvO5SmsqLLNURlqqO5bSy4jmtVGnP76TWCmAFsAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMcK4Nb739hd1/G+7x0W5pZHylvCP/ZmAAAgEQDmrV23447Tq8LWqyUlJX++/O15a/eXlLxYBQAAiQAw5/Izg7krB3ddlP/lnWDDfRNsgQBIDIC552eC+SGCziz5w+CgefW24e+3hxcjCwoK1i/I7S79snIjS0F0pbLzYjmt0j6RlRqZHd20Ujk9DhcdGUDZeddlgubxXT/0b9p8fYjgtf0fPbElPBVc3dDQcGpTSuT/NVMmHRnAihsywSXjp3YtAE+1d/XO7xDRq76+/qTi3t0lO6t3ZCmMrlReaSynVZ0XWaleEU4r1afH4X61R94CLQr3/0umXdDRrHjgwfDse9ueILhn6cXOAM4AiTgDPL/0kYqWLZ1PPS+97PWOQ8HK9rKdB5cCAACIOYCKnav3Tbsq/PA/G8y/sWMndM3mrfu2LvYUCIBkAAj3PNvDE2/58j1ho3MhKHt1+2CPQQFIDICeAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8Z9ZPzO4uhansyFIdYanqWE4rqzSW00oV9jhcWPuFV4AFud2lX1ZuZCmIrlR2XiynVdonslIjs6ObViqnx+EiWyBbIFsgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgM8H4Nb739hd19GoaBk2bNjezOEOAACIP4B5a9ftuOP0qs7W/pKSF6sOdwAAQPwBzLn8zGDuysFha8N9E/69AwAA4g9g7vmZYH74mQ+C5tXbhr/f/qkOAACIPYCy867LBM3jw5/9uUte2//RE1vqDnVMqampOaMxq9uksiJLPEtFOq1E/m1NmXRkACtuyASXjJ/aZTeYP37CoY6++fn5Z8/O6S4FWTmRpTDCUqWxnFZ1dLX6RTitVHaPw31qj7yILAq3+0umXRC2btsTBPcsvfhwhy2QLVD8zwDPL32komVLpuM0sLK9bOdT7Yc7AAAg/gAqdq7eN+2q4NLLnr1m89Z9Wxcf7AAAgFgCqFixasCalpVvH+65bXtdEJQv3xOUvbp98KEOAACII4Cqa19465U1O3eddcFRFQAAgHgBqLj58d9vWhPMf+G7AACQQADlm568KQSw4eE1AACQyBXgrI4VYNHHvwYAgCQegufv+seqt+545rF2AABIIoDgpTfH/POTdUf3+QcAgNgByD2WAgAAELND8AO1nRl4PQAAJBHA10eNGrVw1fRPAAAgmVugjpQ9/fGzAACQWADBpe9+DwAAkgug+VtXAABAIs8Agzqy608/BACAJAJoGdiRN34XAABAcrdARxsAAIgTgN/MOJgR7wAAQNIAVLUMPZTFAACQuBWg6mCj4r2rAAAgiWeAsh3b+vfv/7cXrgAAgCQCmPvM5AGTzx3wshUAgCQCqPjm44O//WTZz1/2O8EAJBFA+aYnq55+vG7Dw34nGICkrgDX/nTqhnedAQBI5Blg0TOP/f3hrR/++HUAAEgigLJ719XtfOWvD2YAACBxAD586/a6YyoAAABxAvDQrvQPbjkWAwAAEKstUMWO51ZNDw1kAAAgkWeA3Nzf3r05NHDldwAAIImH4M51YMWu6f5rRACSCaDs7uesAAAkFEDXp//onwUBAECcALSsmv6zrbsHH30BAACIE4BNr+1tP6YCAAAQJwBVx1oAAADidggGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIBkAVg/u293ycvqG1lKIyxVHctpZZXGclqpvB6HC2q/8ApQXNRd+mYVRZa86EoVFMZyWtUFkZX6WnSlilL9ehzuXWsLZAtkCwQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADwuQB88KPv/6TrjX/w3sZfZIKK92bOnHl7FQAAJAJA+UO33P+rxR2teU9c+cs3H8zMW/vH/PzdAACQDACXjJ9Qdt4NdWFrybQzgzk3Tt1w38W2QAAkBsCi8+uCOeFHPwhe2psJmsdPaL6xsWMnBAAA/2rn3qOiOO8wjr+AdkCDJh7KyJKw4BUvrGwwaG4SL0BURCIGL62aIHiioKCcIygRowbEoCFilJNY4yVVD4mXIGm1jRps692oaU+0arWx1eMt6SU2vZ3+0ZlhlsWY3aKEpfvyfc5Zd5wZePnNzmff951haQ0A1JT5+mmfbM4Hts+3T3np2r/PXdGGQH5RUVGRAwJdJdwn0GPx82BTflKW5SNpWeHuf5LIxgKIN5ZPVCy8KFb8xCZmFmkiHoiOju6b0N5VAnzaeyzhnmsqKFzKsvyCPHgIPdeUT4DbzQGR9zIECt23+Ff2upXvzElnCMQQqHVMgovi1QJjEpyxeKfeDexbbzfmwwAAQKu4DLp19qHF2SLzVnbKprS0tD9OPnju2qHEwVwGBUDrAGDeCCt5Y/lHaQYAseIPbx+3chUIAK0EwN0FWJ3LAABAqwPQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAir433dZU2fr4eS6AHmwqSsqzwACnL8mnjdvODkU0G0LGtq7Txa+uxBHquqYAgKcsKD5CyLJ/2bjd3jmQIxBCIIRAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADcF4Ab7779/h1LzhUAAID0ACzbl20+nN1gybkCAO7TIVg/DOajbSftpfc1/+Prrx38tg22BndouGt/IfrrW0eaKzo03LWttqu/4z++jl0dK+63zbkPfPMbNVub/iO/WWfztflC0wFkPBOvprxsdy45VwDAXQIfV5TuvWOVp0OeVPpEP68o/SJzlF7dHlYe7tZLyYnspyiDovsoT4Y8rcT27q4oj/cdrjwR8qwyOuIpJWdIYo7SM+JFbddHlJyuUYoSMyJWGRUySokdEaMoUV1zlEe0b/RixA+UnMQhOcpTEaOVZ0MeU4b39bY2k+6vzYdeanSbEU0FMGOsXUx5bqhzybkCAO6inRffcVIVz8f720xrGgA1Zb5NjHkm2blUvyI8KSmpa0KAqwT5BHgsfp5rKjy8cfsFDVfI/0PGuXsxIxsLIN65VL8CAACQHwBDIIZArXoIJDKK4tWCuklw3ZJzBQAaPwkedC+TQ8WYkHZrMDkcZ04O+9w5OeypTw4Vc3L4hBLbt6ltRni4zSSludts8iTYsnX2ocXZIvNWtrlkPgHgfyZYv1TX2XzUX6rr3PBSnWPrXbv293VcBvU3Lw/Wb3VcHuxsXh50/40a2ebcALPNzs3epnEZ9I46m6/NF76zG2ElbyznRhg3wlrjnWC3AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMD7AaR1dJWERzt6LAM82NRAKcsaOEDKsh5NcLt5fJMB/Lydy4wY0s5jec1zTT30fSnLSuwtZVn9ot1vH9iMvU+7XkLG9O0nZVndI2SsKvixH7Vc4wAAAAAAAIDWCqDNXCnPlPCRUpY1MlDGqvznPigIIYQQjyb0i3Of/cYuVUklu2NiYubbxMyKqMuTpalq3QXtn7JfRs1eXv8kS1nqRO0Fe25oy5Q1pWjnwaxCqQBkZp0NDu4k8rMurdj9nlWSovJ3DxbCErf+9xPH9jCfpCkrdPtg7QWztkhZ6sT1Nu1hlQlApf4XgYXY+LPJ2mOSFCWpBZ+M086Uyh9vEO/MSTefpCmr5C3jHbhFygqNuyLE1LE2mQBkHE7Uu9KCl20ioyhZlqFqnHamTJs1VEzP+qn5JE1Z07O6frKp0NoiZVn0H2DGQqkmASd+u/zG1oWT6v86tjwA9L91nPlqofkkTVn5t1ae31eU1yJlydgD6BkzJ12qHkCVsweoK8uYuL36ixYpS8Y5wLoDVg1AvD7+l2UOYL5VyjYHMMv6dItdB9AyZU0pyquU7CrQxll5NyaO7ZGfVXgjTparQHVvlZa4986n6FeBjCdpyjp4uDB046zklikrdF/i4ityjYAsXyT1u5ynzQUqkpbK0gHUvVWK/LeGzM6rf5KlLHVjRdSy7BYsS5Vr/O/v71yUbGrjL2VZVqucrxYhhBBCCCGEEEIIId6S/WFhqalhYdW5rwxzfY8m9JWj1nnanmFK9Xq7q13WWDmaxAsTOsE49detdHm/UJ32VbqY9+brQpSdCXN1np/6agPHkngxgAPWsgOfDtzSQ5R1NO5XrvjhcZvj3f22rQ6AsEzYlizUsvEH7GLF+IvapnePC8uft/xa33KULoB4LQBVGwJ9+PWi0WHF2/sMr84VmaVhXVJP7jT2KN+RK0wA6tS/HKtcnTo8ddvOVQvWaO/7R5bMXBTWpVrrF2qLJ3MwiVcDqF5jm7q/OC//ao39w6pL1jGf1xi/bDTvy5sOAGLakSW1VYUiY8FR/evU2uvpq09evFGq9Qsz9b0I8WIA2mm8asESoZYOy7xak5CQcKbK+O3dvdvi63sA7S2/7IBNVO7YY91bdbPk6q6S1cXLRXAbm/aVr3MwiVcD0AYxqxbk6gDKd6ztqeU/BoDa4qH1PcC8N3Mzt8aMiu2yx6qNgU4dyRUzF6V+rf+yY7lGhxA5AEz/fI82pe30PX1e23+v1jM4eoDaqpula5cez7y6x2qZUKP3GUJdt/l01VnjKwmRA8D50uJkYZkwzJgDzPhnugPAmB01hg19CCT2Vi26bSu/qk2A9Z7g1JfHOJhEEgD2aR//tdufquve01ct0E7teft/FxFR8fH1s5YJa6/9/XTsyQva+upjmpKqZSGnr28QRj9BiNcBiNtl1z89vcuesmuSKP/XJaFu1dacqBj02cq6K/vGJf4p/9DmBOMuGx/Yitm0suCDwcKyWp8c5P/tg3HLLojQ0ts2DibxwhifmFNVofY3PzunOj5DZ57R6oy7LvEbMsp3NLj3VXmaERCRNJmrv2V+q350psr5Rz7U2l09OFBE0mQsvXt4Yyldu9651rJ5A4eJtKrwIW9CCCGEEEIIIYQQQggh95b/AseQupxvbuw9AAAAAElFTkSuQmCC" alt="A scatter plot showing an step-wise function representing the time-varying hospitalised case fatality risk over time. The function outputs 0.9 if time (days) is less than 60, and 0 if not." /></p>
<p>The time-varying case fatality risk function
(<code>config$time_varying_death_risk</code>) for the hospitalised death
risk (<code>hosp_death_risk</code>) and non-hospitalised death risk
(<code>non_hosp_death_risk</code>) throughout the epidemic. In this case
the risks are at their user-supplied values from day 0 to day 60, and
then become 0 onwards.</p>
<p>Simulating with the stepwise time-varying case fatality risk:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">sim_linelist</span>(</span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a>  <span class="at">contact_distribution =</span> contact_distribution,</span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a>  <span class="at">infectious_period =</span> infectious_period,</span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a>  <span class="at">prob_infection =</span> <span class="fl">0.5</span>,</span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>  <span class="at">onset_to_hosp =</span> onset_to_hosp,</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>  <span class="at">onset_to_death =</span> onset_to_death,</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>  <span class="at">hosp_death_risk =</span> <span class="fl">0.9</span>,</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>  <span class="at">non_hosp_death_risk =</span> <span class="fl">0.75</span>,</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>  <span class="at">outbreak_size =</span> <span class="fu">c</span>(<span class="dv">500</span>, <span class="dv">1000</span>),</span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>  <span class="at">config =</span> config</span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a>)</span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a><span class="fu">head</span>(linelist)</span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a><span class="co">#&gt;   id          case_name case_type sex age date_onset date_reporting</span></span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a><span class="co">#&gt; 1  1    Lannis Crossley confirmed   f  54 2023-01-01     2023-01-01</span></span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a><span class="co">#&gt; 2  2 Brittany Masteller confirmed   f  44 2023-01-05     2023-01-05</span></span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a><span class="co">#&gt; 3  4   Hamood al-Jabara confirmed   m  69 2023-01-07     2023-01-07</span></span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a><span class="co">#&gt; 4  5    Vanessa Salazar suspected   f  29 2023-01-11     2023-01-11</span></span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a><span class="co">#&gt; 5  6  Domineque Matthes confirmed   f  16 2023-01-10     2023-01-10</span></span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a><span class="co">#&gt; 6  8       Ana Melendez suspected   f  71 2023-01-09     2023-01-09</span></span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a><span class="co">#&gt;   date_admission   outcome date_outcome date_first_contact date_last_contact</span></span>
<span id="cb21-22"><a href="#cb21-22" tabindex="-1"></a><span class="co">#&gt; 1           &lt;NA&gt; recovered         &lt;NA&gt;               &lt;NA&gt;              &lt;NA&gt;</span></span>
<span id="cb21-23"><a href="#cb21-23" tabindex="-1"></a><span class="co">#&gt; 2           &lt;NA&gt; recovered         &lt;NA&gt;         2022-12-26        2023-01-03</span></span>
<span id="cb21-24"><a href="#cb21-24" tabindex="-1"></a><span class="co">#&gt; 3     2023-01-08      died   2023-01-15         2022-12-26        2023-01-02</span></span>
<span id="cb21-25"><a href="#cb21-25" tabindex="-1"></a><span class="co">#&gt; 4           &lt;NA&gt;      died   2023-03-06         2023-01-02        2023-01-09</span></span>
<span id="cb21-26"><a href="#cb21-26" tabindex="-1"></a><span class="co">#&gt; 5           &lt;NA&gt;      died   2023-01-25         2023-01-03        2023-01-07</span></span>
<span id="cb21-27"><a href="#cb21-27" tabindex="-1"></a><span class="co">#&gt; 6           &lt;NA&gt;      died   2023-01-14         2023-01-03        2023-01-09</span></span>
<span id="cb21-28"><a href="#cb21-28" tabindex="-1"></a><span class="co">#&gt;   ct_value</span></span>
<span id="cb21-29"><a href="#cb21-29" tabindex="-1"></a><span class="co">#&gt; 1     27.3</span></span>
<span id="cb21-30"><a href="#cb21-30" tabindex="-1"></a><span class="co">#&gt; 2     23.5</span></span>
<span id="cb21-31"><a href="#cb21-31" tabindex="-1"></a><span class="co">#&gt; 3     26.4</span></span>
<span id="cb21-32"><a href="#cb21-32" tabindex="-1"></a><span class="co">#&gt; 4       NA</span></span>
<span id="cb21-33"><a href="#cb21-33" tabindex="-1"></a><span class="co">#&gt; 5     25.9</span></span>
<span id="cb21-34"><a href="#cb21-34" tabindex="-1"></a><span class="co">#&gt; 6       NA</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a>    <span class="at">names_from =</span> outcome,</span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a>    <span class="at">values_from =</span> date_outcome</span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a>    <span class="at">date_death =</span> died,</span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a>    <span class="at">date_recovery =</span> recovered</span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a>daily <span class="ot">&lt;-</span> <span class="fu">incidence</span>(</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a>  linelist,</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a>  <span class="at">date_index =</span> <span class="fu">c</span>(</span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a>    <span class="at">onset =</span> <span class="st">&quot;date_onset&quot;</span>,</span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>    <span class="at">death =</span> <span class="st">&quot;date_death&quot;</span></span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>  ),</span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>  <span class="at">interval =</span> <span class="st">&quot;daily&quot;</span>,</span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a>  <span class="at">complete_dates =</span> <span class="cn">TRUE</span></span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="fu">plot</span>(daily)</span></code></pre></div>
<p>&lt;img
src=“/tmp/RtmpbTSW6h/Rbuild1864d1f2d4375/simulist/vignettes/time-varying-cfr_files/figure-html/plot-onset-death-time-varying-cfr-stepwise-1.png”
alt=“Two histograms in a single column, showing the daily incidence of
cases from symptom onset and incidence of deaths. The baseline case
fatality risk for hospitalised individuals is 0.9 and the risk of
non-hospitalised individuals is 0.75, and these change in a step-wise
manner at day 60 of the epidemic. The y-axis is labelled”count” and the
x-axis is labelled “date_index”. The plot shows fluctuating cases over
time, and deaths only occuring early in the epidemic and no deaths later
in the outbreak.” /&gt;</p>
<p>The same stepwise function can also be used to specify time windows
were the risk of death is reduced. Here we specify the
<code>hosp_death_risk</code> and <code>non_hosp_death_risk</code> in the
first 50 days of the epidemic, then between day 50 and day 100 the risk
is reduced by half, and then from day 100 onwards the risk goes back to
the rates specified by <code>hosp_death_risk</code> and
<code>non_hosp_death_risk</code>.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a>config <span class="ot">&lt;-</span> <span class="fu">create_config</span>(</span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>  <span class="at">time_varying_death_risk =</span> <span class="cf">function</span>(risk, time) {</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a>    <span class="fu">ifelse</span>(<span class="at">test =</span> time <span class="sc">&gt;</span> <span class="dv">50</span> <span class="sc">&amp;</span> time <span class="sc">&lt;</span> <span class="dv">100</span>, <span class="at">yes =</span> risk <span class="sc">*</span> <span class="fl">0.5</span>, <span class="at">no =</span> risk)</span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a>  }</span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a>stepwise_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a>  <span class="at">time =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">150</span>,</span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a>  <span class="at">value =</span> config<span class="sc">$</span><span class="fu">time_varying_death_risk</span>(<span class="at">risk =</span> <span class="fl">0.9</span>, <span class="at">time =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">150</span>)</span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">ggplot</span>(stepwise_df) <span class="sc">+</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> value)) <span class="sc">+</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Value&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">name =</span> <span class="st">&quot;Time (Days)&quot;</span>) <span class="sc">+</span></span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code></pre></div>
<p><img src="data:image/png;base64,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" alt="A scatter plot showing an step-wise function representing the time-varying hospitalised case fatality risk over time. The function outputs 0.9 if time (days) is less than 50 or greater than 100, and 0.45 if not." /></p>
<p>The time-varying case fatality risk function
(<code>config$time_varying_death_risk</code>) which scales the
hospitalised death risk (<code>hosp_death_risk</code>) and
non-hospitalised death risk (<code>non_hosp_death_risk</code>)
throughout the epidemic. In this case the risks are at their maximum,
user-supplied, values from day 0 to day 50, and then half the risks from
day 50 to day 100, and then return to their maximum value from day 100
onwards.</p>
<p>Simulating with the stepwise time-varying case fatality risk:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> <span class="fu">sim_linelist</span>(</span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>  <span class="at">contact_distribution =</span> contact_distribution,</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>  <span class="at">infectious_period =</span> infectious_period,</span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a>  <span class="at">prob_infection =</span> <span class="fl">0.5</span>,</span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a>  <span class="at">onset_to_hosp =</span> onset_to_hosp,</span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a>  <span class="at">onset_to_death =</span> onset_to_death,</span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a>  <span class="at">hosp_death_risk =</span> <span class="fl">0.9</span>,</span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a>  <span class="at">non_hosp_death_risk =</span> <span class="fl">0.75</span>,</span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a>  <span class="at">outbreak_size =</span> <span class="fu">c</span>(<span class="dv">500</span>, <span class="dv">1000</span>),</span>
<span id="cb28-10"><a href="#cb28-10" tabindex="-1"></a>  <span class="at">config =</span> config</span>
<span id="cb28-11"><a href="#cb28-11" tabindex="-1"></a>)</span>
<span id="cb28-12"><a href="#cb28-12" tabindex="-1"></a><span class="co">#&gt; Warning: Number of cases exceeds maximum outbreak size. </span></span>
<span id="cb28-13"><a href="#cb28-13" tabindex="-1"></a><span class="co">#&gt; Returning data early with 1009 cases and 1973 total contacts (including cases).</span></span>
<span id="cb28-14"><a href="#cb28-14" tabindex="-1"></a></span>
<span id="cb28-15"><a href="#cb28-15" tabindex="-1"></a><span class="fu">head</span>(linelist)</span>
<span id="cb28-16"><a href="#cb28-16" tabindex="-1"></a><span class="co">#&gt;   id         case_name case_type sex age date_onset date_reporting</span></span>
<span id="cb28-17"><a href="#cb28-17" tabindex="-1"></a><span class="co">#&gt; 1  1    Dang Autterson  probable   m  48 2023-01-01     2023-01-01</span></span>
<span id="cb28-18"><a href="#cb28-18" tabindex="-1"></a><span class="co">#&gt; 2  2 Darrion Beauchamp  probable   m   4 2023-01-02     2023-01-02</span></span>
<span id="cb28-19"><a href="#cb28-19" tabindex="-1"></a><span class="co">#&gt; 3  3     Alexis Geebro  probable   f  58 2023-01-07     2023-01-07</span></span>
<span id="cb28-20"><a href="#cb28-20" tabindex="-1"></a><span class="co">#&gt; 4  6  Angelica Herrera confirmed   f  31 2023-01-02     2023-01-02</span></span>
<span id="cb28-21"><a href="#cb28-21" tabindex="-1"></a><span class="co">#&gt; 5  7   Catherine Scott confirmed   f  77 2023-01-10     2023-01-10</span></span>
<span id="cb28-22"><a href="#cb28-22" tabindex="-1"></a><span class="co">#&gt; 6  8      Mario Ibarra confirmed   m  62 2023-01-08     2023-01-08</span></span>
<span id="cb28-23"><a href="#cb28-23" tabindex="-1"></a><span class="co">#&gt;   date_admission outcome date_outcome date_first_contact date_last_contact</span></span>
<span id="cb28-24"><a href="#cb28-24" tabindex="-1"></a><span class="co">#&gt; 1           &lt;NA&gt;    died   2023-01-22               &lt;NA&gt;              &lt;NA&gt;</span></span>
<span id="cb28-25"><a href="#cb28-25" tabindex="-1"></a><span class="co">#&gt; 2     2023-01-05    died   2023-02-05         2022-12-30        2023-01-01</span></span>
<span id="cb28-26"><a href="#cb28-26" tabindex="-1"></a><span class="co">#&gt; 3     2023-01-09    died   2023-01-25         2023-01-01        2023-01-02</span></span>
<span id="cb28-27"><a href="#cb28-27" tabindex="-1"></a><span class="co">#&gt; 4     2023-01-04    died   2023-01-13         2022-12-30        2023-01-06</span></span>
<span id="cb28-28"><a href="#cb28-28" tabindex="-1"></a><span class="co">#&gt; 5           &lt;NA&gt;    died   2023-01-19         2023-01-04        2023-01-10</span></span>
<span id="cb28-29"><a href="#cb28-29" tabindex="-1"></a><span class="co">#&gt; 6           &lt;NA&gt;    died   2023-02-12         2023-01-05        2023-01-11</span></span>
<span id="cb28-30"><a href="#cb28-30" tabindex="-1"></a><span class="co">#&gt;   ct_value</span></span>
<span id="cb28-31"><a href="#cb28-31" tabindex="-1"></a><span class="co">#&gt; 1       NA</span></span>
<span id="cb28-32"><a href="#cb28-32" tabindex="-1"></a><span class="co">#&gt; 2       NA</span></span>
<span id="cb28-33"><a href="#cb28-33" tabindex="-1"></a><span class="co">#&gt; 3       NA</span></span>
<span id="cb28-34"><a href="#cb28-34" tabindex="-1"></a><span class="co">#&gt; 4     23.9</span></span>
<span id="cb28-35"><a href="#cb28-35" tabindex="-1"></a><span class="co">#&gt; 5     19.9</span></span>
<span id="cb28-36"><a href="#cb28-36" tabindex="-1"></a><span class="co">#&gt; 6     25.4</span></span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a>linelist <span class="ot">&lt;-</span> linelist <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>    <span class="at">names_from =</span> outcome,</span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>    <span class="at">values_from =</span> date_outcome</span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a>    <span class="at">date_death =</span> died,</span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a>    <span class="at">date_recovery =</span> recovered</span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a>  )</span></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a>daily <span class="ot">&lt;-</span> <span class="fu">incidence</span>(</span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a>  linelist,</span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a>  <span class="at">date_index =</span> <span class="fu">c</span>(</span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a>    <span class="at">onset =</span> <span class="st">&quot;date_onset&quot;</span>,</span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a>    <span class="at">death =</span> <span class="st">&quot;date_death&quot;</span></span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a>  ),</span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a>  <span class="at">interval =</span> <span class="st">&quot;daily&quot;</span>,</span>
<span id="cb30-8"><a href="#cb30-8" tabindex="-1"></a>  <span class="at">complete_dates =</span> <span class="cn">TRUE</span></span>
<span id="cb30-9"><a href="#cb30-9" tabindex="-1"></a>)</span></code></pre></div>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="fu">plot</span>(daily)</span></code></pre></div>
<p>&lt;img
src=“/tmp/RtmpbTSW6h/Rbuild1864d1f2d4375/simulist/vignettes/time-varying-cfr_files/figure-html/plot-onset-death-time-varying-cfr-stepwise-window-1.png”
alt=“Two histograms in a single column, showing the daily incidence of
cases from symptom onset and incidence of deaths. The maximum case
fatality risk for hospitalised individuals is 0.9 and the risk of
non-hospitalised individuals is 0.75, and these change in a step-wise
manner at day 50 and 100 of the epidemic. The y-axis is labelled”count”
and the x-axis is labelled “date_index”. The plot shows fluctuating
cases over time, and deaths closely resemble the number of cases over
time.” /&gt;</p>
<p>The maximum case fatality risk for hospitalised individuals is 0.9
and for non-hospitalised individuals is 0.75, and these rates remain
constant from days 0 to 50, and then from days 50 to 100 the case
fatality risk is halved (i.e <code>hosp_death_risk</code> = 0.45 and
<code>non_hosp_death_risk</code> = 0.375), before going back to their
original risks from day 100 onwards.”</p>
<p>This vignette does not explore applying a time-varying case fatality
risk to age-stratified fatality risks, but this is possible with the
<code>sim_linelist()</code> and <code>sim_outbreak()</code> functions.
See the <a href="age-strat-risks.html">Age-stratified hospitalisation
and death risks vignette</a> and combine with instructions from this
vignette on setting in a time-varying function using
<code>create_config()</code>.</p>
<p>The implementation of the time-varying case fatality rate in the
simulation functions (<code>sim_linelist()</code> and
<code>sim_outbreak()</code>) is flexible to many functional forms. If
there are other ways to have a time-varying case fatality risk that are
not currently possible please make an <a href="https://github.com/epiverse-trace/simulist/issues">issue</a> or <a href="https://github.com/epiverse-trace/simulist/pulls">pull
request</a>. Currently the hospitalisation risk is assumed constant over
time can cannot be adjusted to be time-varying like the death risk, if
this is a feature you would like included in the {simulist} R package
please make the request in an <a href="https://github.com/epiverse-trace/simulist/issues">issue</a>.</p>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
